<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>Extension:DeletePagePermanently - MediaWiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"Extension","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":102,"wgPageName":"Extension:DeletePagePermanently","wgTitle":"DeletePagePermanently","wgCurRevisionId":1929603,"wgRevisionId":1929603,"wgArticleId":32599,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Extensions which host their code in-wiki","Extensions with unknown license","Beta status extensions","MediaWiki extensions without a screenshot","User interface extensions","Extensions which add rights","SkinTemplateContentActions extensions","SkinTemplateNavigation extensions","UnknownAction extensions","All extensions","Page deletion extensions"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Extension:DeletePagePermanently","wgRelevantArticleId":32599,"wgRequestId":"V-rK0QpAAEYAARafVG8AAACB","wgIsProbablyEditable":true,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":true,"dialogs":true,"preview":false,"publish":false},"wgBetaFeaturesFeatures":[],"wgMediaViewerOnClick":true,"wgMediaViewerEnabledByDefault":true,"wgVisualEditor":{"pageLanguageCode":"en","pageLanguageDir":"ltr","usePageImages":true,"usePageDescriptions":true},"wgPreferredVariant":"en","wgMFDisplayWikibaseDescriptions":{"search":true,"nearby":true,"watchlist":true,"tagline":false},"wgULSCurrentAutonym":"English","wgNoticeProject":"wikimedia","wgCentralNoticeCookiesToDelete":[],"wgCentralNoticeCategoriesUsingLegacy":["Fundraising","fundraising"],"wgCategoryTreePageCategoryOptions":"{\"mode\":0,\"hideprefix\":20,\"showcount\":true,\"namespaces\":false}","wgWikibaseItemId":"Q21677057","wgCentralAuthMobileDomain":false,"wgVisualEditorToolbarScrollOffset":0,"wgEditSubmitButtonLabelPublish":false});mw.loader.state({"ext.globalCssJs.user.styles":"ready","ext.globalCssJs.site.styles":"ready","site.styles":"ready","noscript":"ready","user.styles":"ready","user.cssprefs":"ready","user":"ready","user.options":"loading","user.tokens":"loading","ext.pygments":"ready","wikibase.client.init":"ready","ext.gadget.enwp-boxes":"ready","ext.visualEditor.desktopArticleTarget.noscript":"ready","ext.uls.pt":"ready","ext.tmh.thumbnail.styles":"ready","ext.wikimediaBadges":"ready","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","mediawiki.skinning.interface":"ready","skins.vector.styles":"ready","ext.globalCssJs.user":"ready","ext.globalCssJs.site":"ready"});mw.loader.implement("user.options",function($,jQuery,require,module){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/;

});mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","ext.gadget.site","ext.centralauth.centralautologin","mmv.head","ext.visualEditor.desktopArticleTarget.init","ext.uls.interface","mw.MediaWikiPlayer.loader","mw.PopUpMediaTransform","skins.vector.js"]);});</script>
<link rel="stylesheet" href="/w/load.php?debug=false&amp;lang=en&amp;modules=ext.gadget.enwp-boxes%2Csite%7Cext.pygments%2CwikimediaBadges%7Cext.tmh.thumbnail.styles%7Cext.uls.pt%7Cext.visualEditor.desktopArticleTarget.noscript%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.vector.styles%7Cwikibase.client.init&amp;only=styles&amp;printable=1&amp;skin=vector"/>
<script async="" src="/w/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;printable=1&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="/w/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;printable=1&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.28.0-wmf.21"/>
<meta name="referrer" content="origin-when-cross-origin"/>
<meta name="robots" content="noindex,follow"/>
<link rel="alternate" type="application/x-wiki" title="Edit" href="/w/index.php?title=Extension:DeletePagePermanently&amp;action=edit"/>
<link rel="edit" title="Edit" href="/w/index.php?title=Extension:DeletePagePermanently&amp;action=edit"/>
<link rel="apple-touch-icon" href="/static/apple-touch/mediawiki.png"/>
<link rel="shortcut icon" href="/static/favicon/mediawiki.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="/w/opensearch_desc.php" title="MediaWiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="//www.mediawiki.org/w/api.php?action=rsd"/>
<link rel="copyright" href="//creativecommons.org/licenses/by-sa/3.0/"/>
<link rel="alternate" type="application/atom+xml" title="MediaWiki Atom feed" href="/w/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<link rel="canonical" href="https://www.mediawiki.org/wiki/Extension:DeletePagePermanently"/>
<link rel="dns-prefetch" href="//login.wikimedia.org"/>
<link rel="dns-prefetch" href="//meta.wikimedia.org" />
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-102 ns-subject page-Extension_DeletePagePermanently rootpage-Extension_DeletePagePermanently skin-vector action-view feature-footer-v2">		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>

							<div id="siteNotice"><!-- CentralNotice --></div>
						<div class="mw-indicators">
</div>
			<h1 id="firstHeading" class="firstHeading" lang="en">Extension:DeletePagePermanently</h1>
									<div id="bodyContent" class="mw-body-content">
									<div id="siteSub">From MediaWiki.org</div>
								<div id="contentSub"></div>
												<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-head">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><table class="plainlinks ombox ombox-notice" role="presentation">
<tr>
<td class="mbox-image"><img alt="" src="//upload.wikimedia.org/wikipedia/commons/thumb/1/1d/Information_icon4.svg/40px-Information_icon4.svg.png" width="40" height="40" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/1/1d/Information_icon4.svg/60px-Information_icon4.svg.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/1/1d/Information_icon4.svg/80px-Information_icon4.svg.png 2x" data-file-width="620" data-file-height="620" /></td>
<td class="mbox-text"><b>This extension stores its source code on a wiki page. Please be aware that this code may be unreviewed or maliciously altered.</b> They may contain security holes, outdated interfaces that are no longer compatible etc.<br />
<p>Note: No <a href="/wiki/Special:MyLanguage/Localisation#Translation_resources" title="Special:MyLanguage/Localisation">localisation</a> updates are provided for this extension by <a href="/wiki/Special:MyLanguage/translatewiki.net" title="Special:MyLanguage/translatewiki.net">Translatewiki.net</a><span style="display:none"><a href="/wiki/Translatewiki.net" title="Translatewiki.net">translatewiki.net</a></span>.<br /></p>
<small><i>The developer is invited and encouraged to <a href="/wiki/Gerrit/New_repositories" title="Gerrit/New repositories">request access</a> to MediaWiki's <a href="/wiki/Special:MyLanguage/Gerrit" title="Special:MyLanguage/Gerrit">code repository</a> to address this.</i></small></td>
</tr>
</table>
<table cellspacing="0" cellpadding="0" border="0" style="background: transparent; margin-top:0.5em;border:1px #b52 solid;padding:0.5em;background-color: #fef7f5">
<tr>
<td nowrap="nowrap" valign="top"><span style="position: relative; top: -2px;"><img alt="Warning" src="//upload.wikimedia.org/wikipedia/commons/thumb/5/51/Attention_niels_epting.svg/18px-Attention_niels_epting.svg.png" title="Warning" width="18" height="18" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/5/51/Attention_niels_epting.svg/27px-Attention_niels_epting.svg.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/5/51/Attention_niels_epting.svg/36px-Attention_niels_epting.svg.png 2x" data-file-width="80" data-file-height="80" /></span> <b>Warning:</b></td>
<td valign="top" style="padding-left:0.5em;">This extension is incompatible with <a href="/wiki/Manual:CompressOld.php" title="Manual:CompressOld.php">CompressOld.php</a> scheme, and may break your wiki if you're using that form of old revision compression. Use with caution if you're using any sort of fancy stuff with the text table</td>
</tr>
</table>
<table cellspacing="0" cellpadding="0" border="0" style="background: transparent; margin-top:0.5em;border:1px #b52 solid;padding:0.5em;background-color: #fef7f5">
<tr>
<td nowrap="nowrap" valign="top"><span style="position: relative; top: -2px;"><img alt="Warning" src="//upload.wikimedia.org/wikipedia/commons/thumb/5/51/Attention_niels_epting.svg/18px-Attention_niels_epting.svg.png" title="Warning" width="18" height="18" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/5/51/Attention_niels_epting.svg/27px-Attention_niels_epting.svg.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/5/51/Attention_niels_epting.svg/36px-Attention_niels_epting.svg.png 2x" data-file-width="80" data-file-height="80" /></span> <b>Warning:</b></td>
<td valign="top" style="padding-left:0.5em;">There is a new extension based on this at <a href="/wiki/Extension:DeletePagesForGood" title="Extension:DeletePagesForGood">DeletePagesForGood</a> that works with mediawiki 1.25+</td>
</tr>
</table>
<p><br /></p>
<table class="tpl-infobox ext-infobox ext-status-beta" cellspacing="0">
<caption><b><a href="/wiki/Special:MyLanguage/Manual:Extensions" title="Special:MyLanguage/Manual:Extensions">MediaWiki extensions manual</a><span style="display:none"><a href="/wiki/Manual:Extensions" title="Manual:Extensions">Manual:Extensions</a></span></b></caption>
<tr class="tpl-infobox-header ext-infobox-header">
<th colspan="2" style="padding-top: 0.5em;">
<div class="floatleft"><a href="/wiki/Special:MyLanguage/Template:Extension#Content" title="Special:MyLanguage/Template:Extension#Content"><img alt="Crystal Clear action run.png" src="//upload.wikimedia.org/wikipedia/commons/thumb/5/5d/Crystal_Clear_action_run.png/40px-Crystal_Clear_action_run.png" width="40" height="40" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/5/5d/Crystal_Clear_action_run.png/60px-Crystal_Clear_action_run.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/5/5d/Crystal_Clear_action_run.png/80px-Crystal_Clear_action_run.png 2x" data-file-width="128" data-file-height="128" /></a></div>
<span style="font-size: 130%;">DeletePagePermanently</span><br />
<p><a href="/wiki/Special:MyLanguage/Extension_status" title="Special:MyLanguage/Extension status">Release status:</a><span style="display:none"><a href="/wiki/Extension_status" title="Extension status">Extension status</a></span> beta</p>
</th>
</tr>
<tr>
<td style="vertical-align: top"><a href="/wiki/Special:MyLanguage/Template:Extension#type" title="Special:MyLanguage/Template:Extension"><b>Implementation</b></a><span style="display:none"><a href="/wiki/Template:Extension#type" title="Template:Extension">Template:Extension#type</a></span></td>
<td>User interface</td>
</tr>
<tr>
<td style="vertical-align: top"><a href="/wiki/Special:MyLanguage/Template:Extension#description" title="Special:MyLanguage/Template:Extension"><b>Description</b></a><span style="display:none"><a href="/wiki/Template:Extension#description" title="Template:Extension">Template:Extension#description</a></span></td>
<td>Delete a page permanently from the database</td>
</tr>
<tr>
<td style="vertical-align: top"><a href="/wiki/Special:MyLanguage/Template:Extension#username" title="Special:MyLanguage/Template:Extension"><b>Author(s)</b></a><span style="display:none"><a href="/wiki/Template:Extension#username" title="Template:Extension">Template:Extension#username</a></span></td>
<td>Wolfgang Stöttinger, Ludovic MOUTON (<a href="/w/index.php?title=User:LeLorrain&amp;action=edit&amp;redlink=1" class="new" title="User:LeLorrain (page does not exist)">LeLorrain</a><sup><a href="/wiki/User_talk:LeLorrain" title="User talk:LeLorrain">talk</a></sup>)</td>
</tr>
<tr>
<td style="vertical-align: top"><a href="/wiki/Special:MyLanguage/Template:Extension#version" title="Special:MyLanguage/Template:Extension"><b>Latest version</b></a><span style="display:none"><a href="/wiki/Template:Extension#version" title="Template:Extension">Template:Extension#version</a></span></td>
<td>2.1.3 (MW1.16.x 2.1.3)</td>
</tr>
<tr>
<td style="vertical-align: top"><a href="/wiki/Special:MyLanguage/Template:Extension#mediawiki" title="Special:MyLanguage/Template:Extension"><b>MediaWiki</b></a><span style="display:none"><a href="/wiki/Template:Extension#mediawiki" title="Template:Extension">Template:Extension#mediawiki</a></span></td>
<td>1.13+, 1.16.x</td>
</tr>
<tr>
<td style="vertical-align: top"><a href="/wiki/Special:MyLanguage/Template:Extension#license" title="Special:MyLanguage/Template:Extension"><b>License</b></a><span style="display:none"><a href="/wiki/Template:Extension#license" title="Template:Extension">Template:Extension#license</a></span></td>
<td>GPL</td>
</tr>
<tr>
<td style="vertical-align: top"><b>Download</b></td>
<td><a href="#Code">This page</a></td>
</tr>
<tr>
<td style="padding: 0pt;" colspan="2">
<table class="mw-collapsible mw-collapsed" style="border-collapse: collapse; width: 100%;">
<tr>
<th style="vertical-align:top; text-align:left; padding:0.2em 0.5em"><a href="/wiki/Special:MyLanguage/Template:Extension#parameters" title="Special:MyLanguage/Template:Extension"><b>Parameters</b></a><span style="display:none"><a href="/wiki/Template:Extension#parameters" title="Template:Extension">Template:Extension#parameters</a></span></th>
</tr>
<tr>
<td>
<p>$wgDeletePagePermanentlyNamespaces</p>
</td>
</tr>
</table>
</td>
</tr>
<tr>
<td style="padding: 0pt;" colspan="2">
<table class="mw-collapsible mw-collapsed" style="border-collapse: collapse; width: 100%;">
<tr>
<th style="vertical-align:top; text-align:left; padding:0.2em 0.5em"><a href="/wiki/Special:MyLanguage/Template:Extension#rights" title="Special:MyLanguage/Template:Extension"><b>Added rights</b></a><span style="display:none"><a href="/wiki/Template:Extension#rights" title="Template:Extension">Template:Extension#rights</a></span></th>
</tr>
<tr>
<td>
<p>deleteperm</p>
</td>
</tr>
</table>
</td>
</tr>
<tr>
<td style="padding: 0pt;" colspan="2">
<table class="mw-collapsible mw-collapsed" style="border-collapse: collapse; width: 100%;">
<tr>
<th style="vertical-align:top; text-align:left; padding:0.2em 0.5em"><a href="/wiki/Special:MyLanguage/Template:Extension#hook" title="Special:MyLanguage/Template:Extension"><b>Hooks used</b></a><span style="display:none"><a href="/wiki/Template:Extension#hook" title="Template:Extension">Template:Extension#hook</a></span></th>
</tr>
<tr>
<td><a href="/wiki/Special:MyLanguage/Manual:Hooks/SkinTemplateContentActions" title="Special:MyLanguage/Manual:Hooks/SkinTemplateContentActions">SkinTemplateContentActions</a><span style="display:none"><a href="/wiki/Manual:Hooks/SkinTemplateContentActions" title="Manual:Hooks/SkinTemplateContentActions">Manual:Hooks/SkinTemplateContentActions</a></span><br />
<a href="/wiki/Special:MyLanguage/Manual:Hooks/SkinTemplateNavigation" title="Special:MyLanguage/Manual:Hooks/SkinTemplateNavigation">SkinTemplateNavigation</a><span style="display:none"><a href="/wiki/Manual:Hooks/SkinTemplateNavigation" title="Manual:Hooks/SkinTemplateNavigation">Manual:Hooks/SkinTemplateNavigation</a></span><br />
<a href="/wiki/Special:MyLanguage/Manual:Hooks/UnknownAction" title="Special:MyLanguage/Manual:Hooks/UnknownAction">UnknownAction</a><span style="display:none"><a href="/wiki/Manual:Hooks/UnknownAction" title="Manual:Hooks/UnknownAction">Manual:Hooks/UnknownAction</a></span></td>
</tr>
</table>
</td>
</tr>
<tr>
<td colspan="2" style="text-align:center;">
<p><a href="https://translatewiki.net/wiki/Special:Translate/ext-deletepagepermanently" class="extiw" title="translatewiki:Special:Translate/ext-deletepagepermanently">Translate the DeletePagePermanently extension</a> if it is available at translatewiki.net</p>
</td>
</tr>
<tr>
<td colspan="2" style="text-align:center;"><span style="white-space:nowrap"><a href="//wikiapiary.com/wiki/Extension:DeletePagePermanently" class="extiw" title="wikiapiary:Extension:DeletePagePermanently">Check usage and version matrix.</a></span></td>
</tr>
</table>
<p>This extension can delete pages in every namespace configured without leaving any trace in the database. This extension will automatically delete talk pages and subpages, if any.</p>
<p>The extension <b>DeletePagePermanently</b> adds a new tab that allows you to delete a page permanently from the database. <b>Although version 2.0 is safer than version 1.0 it can still harm your wiki, especially when used incorrectly. Test the extension carefully and backup your database as the extension is still in beta status.</b></p>
<p>Since version 2.1 it is possible to use the function from other PHP files.</p>
<p>Although this extension deletes the image page, the image will remain in the image folder, undeleted</p>
<p></p>
<div id="toc" class="toc">
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Installation"><span class="tocnumber">1</span> <span class="toctext">Installation</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Download"><span class="tocnumber">1.1</span> <span class="toctext">Download</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Install"><span class="tocnumber">1.2</span> <span class="toctext">Install</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="#Configuration"><span class="tocnumber">2</span> <span class="toctext">Configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#User_rights"><span class="tocnumber">2.1</span> <span class="toctext">User rights</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Namespaces"><span class="tocnumber">2.2</span> <span class="toctext">Namespaces</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#Code"><span class="tocnumber">3</span> <span class="toctext">Code</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#DeletePagePermanently.php"><span class="tocnumber">3.1</span> <span class="toctext">DeletePagePermanently.php</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#DeletePagePermanently.i18n.php"><span class="tocnumber">3.2</span> <span class="toctext">DeletePagePermanently.i18n.php</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-10"><a href="#MediaWiki_1.16.x_.28or_later.29"><span class="tocnumber">4</span> <span class="toctext">MediaWiki 1.16.x (or later)</span></a></li>
<li class="toclevel-1 tocsection-11"><a href="#History"><span class="tocnumber">5</span> <span class="toctext">History</span></a></li>
<li class="toclevel-1 tocsection-12"><a href="#See_also"><span class="tocnumber">6</span> <span class="toctext">See also</span></a></li>
</ul>
</div>
<p></p>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>The extension was designed for MediaWiki 1.13 but it should be compatible with later version as long as the database layout is the same as MediaWiki 1.13.0 for the tables.</p>
<p>As the Table structure of MediaWiki 1.14 is similar to 1.13 it also works here, I tested and did not figure out any problems.</p>
<h3><span class="mw-headline" id="Download">Download</span></h3>
<p>Please cut and paste the code found <a href="#Code">below</a> and place it in:</p>
<p><code>$IP/extensions/DeletePagePermanently/DeletePagePermanently.php</code></p>
<p>and</p>
<p><code>$IP/extensions/DeletePagePermanently/DeletePagePermanently.i18n.php</code></p>
<p><i>Note: <a href="/wiki/Manual:$IP" title="Manual:$IP">$IP</a> stands for the root directory of your MediaWiki installation, the same directory that holds the <a href="/wiki/Manual:LocalSettings.php" title="Manual:LocalSettings.php">LocalSettings.php</a></i> file.</p>
<h3><span class="mw-headline" id="Install">Install</span></h3>
<p>To install this extension, add the following to <a href="/wiki/Manual:LocalSettings.php" title="Manual:LocalSettings.php">LocalSettings.php</a>:</p>
<div style="overflow:auto" class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
<span class="k">require_once</span><span class="p">(</span><span class="s2">"</span><span class="si">$IP</span><span class="s2">/extensions/DeletePagePermanently/DeletePagePermanently.php"</span><span class="p">);</span>
</pre></div>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<h3><span class="mw-headline" id="User_rights">User rights</span></h3>
<p>You can configure the user rights in <a href="/wiki/Manual:LocalSettings.php" title="Manual:LocalSettings.php">LocalSettings.php</a>:</p>
<p>Defaults from DeletePagePermanently.php:</p>
<div class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
<span class="nv">$wgGroupPermissions</span><span class="p">[</span><span class="s1">'*'</span><span class="p">]</span>         <span class="p">[</span><span class="s1">'deleteperm'</span><span class="p">]</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
<span class="nv">$wgGroupPermissions</span><span class="p">[</span><span class="s1">'user'</span><span class="p">]</span>      <span class="p">[</span><span class="s1">'deleteperm'</span><span class="p">]</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
<span class="nv">$wgGroupPermissions</span><span class="p">[</span><span class="s1">'bureaucrat'</span><span class="p">][</span><span class="s1">'deleteperm'</span><span class="p">]</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
<span class="nv">$wgGroupPermissions</span><span class="p">[</span><span class="s1">'sysop'</span><span class="p">]</span>     <span class="p">[</span><span class="s1">'deleteperm'</span><span class="p">]</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
</pre></div>
<p>The extension introduces a new user rights <i>deleteperm</i>.</p>
<h3><span class="mw-headline" id="Namespaces">Namespaces</span></h3>
<p>Since version 2.0 is the possibility to configure the namespaces in which pages can be deleted. To configure this, add some lines to your <a href="/wiki/Manual:LocalSettings.php" title="Manual:LocalSettings.php">LocalSettings.php</a>:</p>
<div class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
<span class="nv">$wgDeletePagePermanentlyNamespaces</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
	<span class="nx">NS_MAIN</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
	<span class="nx">NS_IMAGE</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
	<span class="nx">NS_CATEGORY</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
	<span class="nx">NS_TEMPLATE</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
	<span class="nx">NS_TALK</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
<span class="p">);</span>
</pre></div>
<p>Built-in namespaces are described on <a href="https://meta.wikimedia.org/wiki/Namespaces" class="extiw" title="m:Namespaces">meta-wiki</a>.</p>
<h2><span class="mw-headline" id="Code">Code</span></h2>
<h3><span class="mw-headline" id="DeletePagePermanently.php">DeletePagePermanently.php</span></h3>
<p>For MediaWiki 1.16.x (or later) see <a href="#MediaWiki_1.16.x">below</a>.</p>
<div style="overflow:auto" class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
<span class="cp">&lt;?php</span>
<span class="sd">/**</span>
<span class="sd"> * DeletePagePermanently.php</span>
<span class="sd"> * based on Version 1.0 BETA from Ludovic MOUTON (2008)</span>
<span class="sd"> * Wolfgang Stöttinger 2008</span>
<span class="sd"> * v. 2.1.3 BETA</span>
<span class="sd"> * GPL</span>
<span class="sd"> * </span>
<span class="sd"> * BE CAREFUL WHEN USING THIS EXTENSION. ONCE A PAGE IS DELETED, IT CAN NOT BE RESTORED ANY MORE.</span>
<span class="sd"> * Changed in Version 2.1.3:</span>
<span class="sd"> *		- Delete automatically the talk page </span>
<span class="sd"> *		- Delete subpages and associeted talk pages (for the moment, not recursively)</span>
<span class="sd"> * Changed in Version 2.1.2:</span>
<span class="sd"> *		- Update category count</span>
<span class="sd"> * Changed in Version 2.1.1:</span>
<span class="sd"> *		- Title is removed from cache.</span>
<span class="sd"> * Changed in Version 2.1.0:</span>
<span class="sd"> *		- deletePage() can now be used from outside in PHP.</span>
<span class="sd"> * </span>
<span class="sd"> * Features of Version 2.0:</span>
<span class="sd"> *		- defined $wgDeletePagePermanentlyNamespaces as an array of namespaces in which pages can be deleted.</span>
<span class="sd"> * 			$wgDeletePagePermanentlyNamespaces = array (</span>
<span class="sd"> * 				NS_MAIN =&gt; true,</span>
<span class="sd"> *				NS_IMAGE =&gt; true,</span>
<span class="sd"> * 				NS_CATEGORY =&gt; true,</span>
<span class="sd"> * 				NS_TEMPLATE =&gt; true,</span>
<span class="sd"> * 				NS_TALK =&gt; true,</span>
<span class="sd"> * 			);</span>
<span class="sd"> *		</span>
<span class="sd"> *		- The tab "Delete permanently" is only shown on pages that can be deleted.</span>
<span class="sd"> * 		- An aditional page to approve the deletion</span>
<span class="sd"> *		- Also log entries are deleted.</span>
<span class="sd"> *		- Also redirects, external links, language links, searchindex entries, page_restrictions, pagelinks, categorylinks, templatelinks, archive entries and image links are deleted.</span>
<span class="sd"> * 		- The watchlist entries are also removed.</span>
<span class="sd"> *		- If the page is an image page, all versions of the image are deleted from the database, the archive and the filesystem. (Thumbnlais won't be removed)</span>
<span class="sd">*/</span>
 
<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nb">defined</span><span class="p">(</span> <span class="s1">'MEDIAWIKI'</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
	<span class="k">exit</span><span class="p">(</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">;</span>
<span class="p">}</span>
 
<span class="nv">$wgExtensionCredits</span><span class="p">[</span><span class="s1">'other'</span><span class="p">][]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'name'</span>    <span class="o">=&gt;</span> <span class="s1">'DeletePagePermanently'</span><span class="p">,</span>
    <span class="s1">'version'</span> <span class="o">=&gt;</span> <span class="s1">'2.1'</span><span class="p">,</span>
    <span class="s1">'author'</span>  <span class="o">=&gt;</span> <span class="s1">'Ludovic MOUTON, Wolfgang STÖTTINGER'</span><span class="p">,</span>
    <span class="s1">'description'</span> <span class="o">=&gt;</span> <span class="s1">'Adds a new delete tab to each page. Pages are deleted permanently from the database.'</span><span class="p">,</span>
    <span class="s1">'url'</span>     <span class="o">=&gt;</span> <span class="s1">'https://www.mediawiki.org/wiki/Extension:DeletePagePermanently'</span><span class="p">,</span>
<span class="p">);</span>
 
<span class="c1"># Default settings</span>
<span class="nv">$wgGroupPermissions</span><span class="p">[</span><span class="s1">'*'</span><span class="p">]</span>         <span class="p">[</span><span class="s1">'deleteperm'</span><span class="p">]</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
<span class="nv">$wgGroupPermissions</span><span class="p">[</span><span class="s1">'user'</span><span class="p">]</span>      <span class="p">[</span><span class="s1">'deleteperm'</span><span class="p">]</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
<span class="nv">$wgGroupPermissions</span><span class="p">[</span><span class="s1">'bureaucrat'</span><span class="p">][</span><span class="s1">'deleteperm'</span><span class="p">]</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
<span class="nv">$wgGroupPermissions</span><span class="p">[</span><span class="s1">'sysop'</span><span class="p">]</span>     <span class="p">[</span><span class="s1">'deleteperm'</span><span class="p">]</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
 
<span class="nv">$wgExtensionMessagesFiles</span><span class="p">[</span><span class="s1">'DeletePagePermanently'</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dirname</span><span class="p">(</span> <span class="k">__FILE__</span> <span class="p">)</span> <span class="o">.</span> <span class="s1">'/DeletePagePermanently.i18n.php'</span><span class="p">;</span>
 
<span class="nv">$wgExtensionFunctions</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'wfDeletePagePermanently'</span><span class="p">;</span>
 
<span class="k">function</span> <span class="nf">wfDeletePagePermanently</span><span class="p">()</span>
<span class="p">{</span>
	<span class="k">new</span> <span class="nx">DeletePagePermanently</span><span class="p">();</span>
	<span class="k">return</span> <span class="k">true</span><span class="p">;</span>
<span class="p">}</span>
 
<span class="k">class</span> <span class="nc">DeletePagePermanently</span>
<span class="p">{</span>
	<span class="k">function</span> <span class="nf">DeletePagePermanently</span><span class="p">()</span>
	<span class="p">{</span>
		<span class="k">global</span> <span class="nv">$wgHooks</span><span class="p">,</span> <span class="nv">$wgMessageCache</span><span class="p">,</span> <span class="nv">$wgUser</span><span class="p">;</span>
 
		<span class="nx">wfLoadExtensionMessages</span><span class="p">(</span> <span class="s1">'DeletePagePermanently'</span> <span class="p">);</span>
 
		<span class="nv">$wgMessageCache</span><span class="o">-&gt;</span><span class="na">addMessage</span><span class="p">(</span> <span class="s1">'delete_permanently'</span><span class="p">,</span> <span class="nx">wfMsg</span><span class="p">(</span><span class="s1">'tab_label'</span><span class="p">));</span>
		<span class="nv">$wgHooks</span><span class="p">[</span><span class="s1">'SkinTemplateContentActions'</span><span class="p">][]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="o">&amp;</span><span class="nv">$this</span><span class="p">,</span> <span class="s1">'AddContentHook'</span><span class="p">);</span>
		<span class="nv">$wgHooks</span><span class="p">[</span><span class="s1">'UnknownAction'</span><span class="p">][]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="o">&amp;</span><span class="nv">$this</span><span class="p">,</span> <span class="s1">'AddActionHook'</span><span class="p">);</span>
	<span class="p">}</span>
 
	<span class="k">function</span> <span class="nf">AddContentHook</span><span class="p">(</span> <span class="o">&amp;</span><span class="nv">$content_actions</span> <span class="p">)</span>
	<span class="p">{</span>
		<span class="k">global</span> <span class="nv">$wgRequest</span><span class="p">,</span> <span class="nv">$wgRequest</span><span class="p">,</span> <span class="nv">$wgTitle</span><span class="p">,</span> <span class="nv">$wgUser</span><span class="p">,</span> <span class="nv">$wgDeletePagePermanentlyNamespaces</span><span class="p">;</span>
 
		<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$wgUser</span><span class="o">-&gt;</span><span class="na">isAllowed</span><span class="p">(</span> <span class="s1">'deleteperm'</span> <span class="p">)</span> <span class="p">)</span>
			<span class="k">return</span> <span class="k">false</span><span class="p">;</span>
 
		<span class="nv">$action</span> <span class="o">=</span> <span class="nv">$wgRequest</span><span class="o">-&gt;</span><span class="na">getText</span><span class="p">(</span> <span class="s1">'action'</span> <span class="p">);</span>
 
 
		<span class="c1">#Special pages can not be deleted (special pages have no article id anyway).</span>
		<span class="k">if</span> <span class="p">(</span> <span class="nv">$wgTitle</span><span class="o">-&gt;</span><span class="na">getArticleID</span><span class="p">()</span> <span class="o">!=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nv">$wgDeletePagePermanentlyNamespaces</span><span class="p">[</span><span class="nv">$wgTitle</span><span class="o">-&gt;</span><span class="na">getNamespace</span><span class="p">()]</span> <span class="o">==</span> <span class="k">true</span> <span class="o">&amp;&amp;</span> <span class="nv">$wgTitle</span><span class="o">-&gt;</span><span class="na">getNamespace</span><span class="p">()</span> <span class="o">!=</span> <span class="nx">NS_SPECIAL</span> <span class="p">)</span>
		<span class="p">{</span>
			<span class="nx">wfLoadExtensionMessages</span><span class="p">(</span> <span class="s1">'DeletePagePermanently'</span> <span class="p">);</span>
 
			<span class="nv">$content_actions</span><span class="p">[</span><span class="s1">'ask_delete_permanently'</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
				<span class="s1">'class'</span> <span class="o">=&gt;</span> <span class="nv">$action</span> <span class="o">==</span> <span class="s1">'ask_delete_permanently'</span> <span class="o">?</span> <span class="s1">'selected'</span> <span class="o">:</span> <span class="k">false</span><span class="p">,</span>
				<span class="s1">'text'</span> <span class="o">=&gt;</span> <span class="nx">wfMsg</span><span class="p">(</span> <span class="s1">'delete_permanently'</span> <span class="p">),</span>
				<span class="s1">'href'</span> <span class="o">=&gt;</span> <span class="nv">$wgTitle</span><span class="o">-&gt;</span><span class="na">getLocalUrl</span><span class="p">(</span> <span class="s1">'action=ask_delete_permanently'</span> <span class="p">)</span>
			<span class="p">);</span>
		<span class="p">}</span>
 
		<span class="k">return</span> <span class="k">true</span><span class="p">;</span>
	<span class="p">}</span>
 
	<span class="k">function</span> <span class="nf">AddActionHook</span><span class="p">(</span> <span class="nv">$action</span><span class="p">,</span> <span class="nv">$wgArticle</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">global</span> <span class="nv">$wgOut</span><span class="p">,</span> <span class="nv">$wgUser</span><span class="p">,</span> <span class="nv">$wgDeletePagePermanentlyNamespaces</span><span class="p">;</span>
 
		<span class="nx">wfLoadExtensionMessages</span><span class="p">(</span> <span class="s1">'DeletePagePermanently'</span> <span class="p">);</span>
 
		<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$wgUser</span><span class="o">-&gt;</span><span class="na">isAllowed</span><span class="p">(</span> <span class="s1">'deleteperm'</span> <span class="p">))</span>
		<span class="p">{</span>
			<span class="nv">$wgOut</span><span class="o">-&gt;</span><span class="na">permissionRequired</span><span class="p">(</span><span class="s1">'deleteperm'</span><span class="p">);</span>
			<span class="k">return</span> <span class="k">false</span><span class="p">;</span>
		<span class="p">}</span>
 
		<span class="c1"># Print a form to approve deletion</span>
		<span class="k">if</span> <span class="p">(</span><span class="nv">$action</span> <span class="o">==</span> <span class="s1">'ask_delete_permanently'</span> <span class="p">)</span>
		<span class="p">{</span>
 
			<span class="nv">$action</span> <span class="o">=</span> <span class="nv">$wgArticle</span><span class="o">-&gt;</span><span class="na">getTitle</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">escapeLocalUrl</span><span class="p">(</span> <span class="s1">'action=delete_permanently'</span> <span class="p">);</span>
			<span class="nv">$wgOut</span><span class="o">-&gt;</span><span class="na">addHTML</span><span class="p">(</span><span class="s2">"&lt;form id='ask_delete_permanently' method='post' action=</span><span class="se">\"</span><span class="si">$action\</span><span class="s2">"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">table</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">td</span><span class="o">&gt;</span><span class="s2">" . wfMsg('ask_deletion') . "</span><span class="o">&lt;/</span><span class="nx">td</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="nx">tr</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">td</span><span class="o">&gt;&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s1">'submit'</span> <span class="nx">name</span><span class="o">=</span><span class="s1">'submit'</span> <span class="nx">value</span><span class="o">=</span><span class="nx">\</span><span class="s2">""</span> <span class="o">.</span> <span class="nx">wfMsg</span><span class="p">(</span><span class="s1">'yes'</span><span class="p">)</span> <span class="o">.</span> <span class="s2">"</span><span class="se">\"</span><span class="s2"> /&gt;&lt;/td&gt;</span>
<span class="s2">        &lt;/tr&gt;</span>
<span class="s2">&lt;/table&gt;&lt;/form&gt;"</span><span class="p">);</span> 		
			<span class="k">return</span> <span class="k">false</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="c1"># Perform actual deletion</span>
		<span class="k">elseif</span> <span class="p">(</span><span class="nv">$action</span> <span class="o">==</span> <span class="s1">'delete_permanently'</span> <span class="p">)</span>
		<span class="p">{</span>
			<span class="nv">$ns</span>  <span class="o">=</span> <span class="nv">$wgArticle</span><span class="o">-&gt;</span><span class="na">mTitle</span><span class="o">-&gt;</span><span class="na">getNamespace</span><span class="p">();</span>
			<span class="nv">$t</span>   <span class="o">=</span> <span class="nv">$wgArticle</span><span class="o">-&gt;</span><span class="na">mTitle</span><span class="o">-&gt;</span><span class="na">getDBkey</span><span class="p">();</span>
			<span class="nv">$id</span>  <span class="o">=</span> <span class="nv">$wgArticle</span><span class="o">-&gt;</span><span class="na">mTitle</span><span class="o">-&gt;</span><span class="na">getArticleID</span><span class="p">();</span>
 
			<span class="k">if</span> <span class="p">(</span> <span class="nv">$t</span> <span class="o">==</span> <span class="s1">''</span> <span class="o">||</span> <span class="nv">$id</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="nv">$wgDeletePagePermanentlyNamespaces</span><span class="p">[</span><span class="nv">$ns</span><span class="p">]</span> <span class="o">!=</span> <span class="k">true</span> <span class="o">||</span> <span class="nv">$ns</span> <span class="o">==</span> <span class="nx">NS_SPECIAL</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="nv">$wgOut</span><span class="o">-&gt;</span><span class="na">addHTML</span><span class="p">(</span><span class="nx">wfMsgHtml</span><span class="p">(</span><span class="s1">'del_impossible'</span><span class="p">));</span> 
				<span class="k">return</span> <span class="k">false</span><span class="p">;</span>
			<span class="p">}</span>
 
			<span class="c1">#delete the page and the talk page too</span>
			<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">deletePermanently</span><span class="p">(</span><span class="nv">$wgArticle</span><span class="o">-&gt;</span><span class="na">mTitle</span><span class="p">);</span>
			<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">deletePermanentlyTalkPage</span><span class="p">(</span><span class="nv">$wgArticle</span><span class="o">-&gt;</span><span class="na">mTitle</span><span class="p">);</span>
			
			<span class="c1"># delete subpages and associeted talk pages</span>
			<span class="k">if</span><span class="p">(</span><span class="nv">$wgArticle</span><span class="o">-&gt;</span><span class="na">mTitle</span><span class="o">-&gt;</span><span class="na">hasSubpages</span><span class="p">())</span>
			<span class="p">{</span>
				<span class="nv">$subPagesList</span> <span class="o">=</span> <span class="nv">$wgArticle</span><span class="o">-&gt;</span><span class="na">mTitle</span><span class="o">-&gt;</span><span class="na">getSubpages</span><span class="p">();</span>
				<span class="k">if</span><span class="p">(</span><span class="nv">$subPagesList</span> <span class="o">!=</span> <span class="k">array</span><span class="p">())</span>
				<span class="p">{</span>
					<span class="k">foreach</span><span class="p">(</span> <span class="nv">$subPagesList</span> <span class="k">as</span> <span class="nv">$subpage</span> <span class="p">)</span>
					<span class="p">{</span>
						<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">deletePermanently</span><span class="p">(</span><span class="nv">$subpage</span><span class="p">);</span>
						<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">deletePermanentlyTalkPage</span><span class="p">(</span><span class="nv">$subpage</span><span class="p">);</span>
					<span class="p">}</span>
				<span class="p">}</span>
			<span class="p">}</span>
			
			<span class="nv">$wgOut</span><span class="o">-&gt;</span><span class="na">addHTML</span><span class="p">(</span><span class="nx">wfMsgHtml</span><span class="p">(</span><span class="s1">'del_done'</span><span class="p">));</span>
			<span class="k">return</span> <span class="k">false</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="c1">//$wgOut-&gt;addHTML(wfMsgHtml('del_not_done')); </span>
		<span class="k">return</span> <span class="k">true</span><span class="p">;</span>
	<span class="p">}</span>
 
	<span class="k">function</span> <span class="nf">deletePermanently</span><span class="p">(</span><span class="nv">$title</span><span class="p">){</span>
		<span class="k">global</span> <span class="nv">$wgOut</span><span class="p">;</span>
 
		<span class="nv">$ns</span>   <span class="o">=</span> <span class="nv">$title</span><span class="o">-&gt;</span><span class="na">getNamespace</span><span class="p">();</span>
		<span class="nv">$t</span>    <span class="o">=</span> <span class="nv">$title</span><span class="o">-&gt;</span><span class="na">getDBkey</span><span class="p">();</span>
		<span class="nv">$id</span>   <span class="o">=</span> <span class="nv">$title</span><span class="o">-&gt;</span><span class="na">getArticleID</span><span class="p">();</span>
		<span class="nv">$cats</span> <span class="o">=</span> <span class="nv">$title</span><span class="o">-&gt;</span><span class="na">getParentCategories</span><span class="p">();</span>
 
		<span class="nv">$dbw</span> <span class="o">=</span> <span class="nx">wfGetDB</span><span class="p">(</span> <span class="nx">DB_MASTER</span> <span class="p">);</span>
 
		<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">begin</span><span class="p">();</span>
 
		<span class="c1">####</span>
		<span class="c1">## First delete entries, which are in direct relation with the page:</span>
		<span class="c1">####</span>
		
		<span class="c1"># delete redirect...</span>
		<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span> <span class="s1">'redirect'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'rd_from'</span> <span class="o">=&gt;</span> <span class="nv">$id</span> <span class="p">),</span> <span class="nx">__METHOD__</span><span class="p">);</span>
 
		<span class="c1"># delete external link...</span>
		<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span> <span class="s1">'externallinks'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'el_from'</span> <span class="o">=&gt;</span> <span class="nv">$id</span> <span class="p">),</span> <span class="nx">__METHOD__</span><span class="p">);</span>			
 
		<span class="c1"># delete language link...</span>
		<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span> <span class="s1">'langlinks'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'ll_from'</span> <span class="o">=&gt;</span> <span class="nv">$id</span> <span class="p">),</span> <span class="nx">__METHOD__</span><span class="p">);</span>			
 
		<span class="c1"># delete search index...</span>
		<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span> <span class="s1">'searchindex'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'si_page'</span> <span class="o">=&gt;</span> <span class="nv">$id</span> <span class="p">),</span> <span class="nx">__METHOD__</span><span class="p">);</span>	
 
		<span class="c1"># Delete restrictions for the page</span>
		<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span> <span class="s1">'page_restrictions'</span><span class="p">,</span> <span class="k">array</span> <span class="p">(</span> <span class="s1">'pr_page'</span> <span class="o">=&gt;</span> <span class="nv">$id</span> <span class="p">),</span> <span class="nx">__METHOD__</span> <span class="p">);</span>	
 
		<span class="c1"># Delete page Links</span>
		<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span> <span class="s1">'pagelinks'</span><span class="p">,</span> <span class="k">array</span> <span class="p">(</span> <span class="s1">'pl_from'</span> <span class="o">=&gt;</span> <span class="nv">$id</span> <span class="p">),</span> <span class="nx">__METHOD__</span> <span class="p">);</span>				
 
		<span class="c1"># delete category links</span>
		<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span> <span class="s1">'categorylinks'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'cl_from'</span> <span class="o">=&gt;</span> <span class="nv">$id</span> <span class="p">),</span> <span class="nx">__METHOD__</span><span class="p">);</span>			
 
		<span class="c1"># delete template links</span>
		<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span> <span class="s1">'templatelinks'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'tl_from'</span> <span class="o">=&gt;</span> <span class="nv">$id</span> <span class="p">),</span> <span class="nx">__METHOD__</span><span class="p">);</span>									
 
		<span class="c1"># read text entries for all revisions and delete them.</span>
		<span class="nv">$res</span> <span class="o">=</span> <span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">select</span> <span class="p">(</span><span class="s1">'revision'</span><span class="p">,</span> <span class="s1">'rev_text_id'</span><span class="p">,</span> <span class="s2">"rev_page=</span><span class="si">$id</span><span class="s2">"</span><span class="p">);</span>
		<span class="k">while</span><span class="p">(</span> <span class="nv">$row</span> <span class="o">=</span> <span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">fetchObject</span><span class="p">(</span><span class="nv">$res</span><span class="p">)</span> <span class="p">)</span> 
		<span class="p">{</span>
			<span class="nv">$value</span> <span class="o">=</span> <span class="nv">$row</span><span class="o">-&gt;</span><span class="na">rev_text_id</span><span class="p">;</span>
			<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="s1">'text'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">'old_id'</span><span class="o">=&gt;</span><span class="nv">$value</span><span class="p">),</span> <span class="nx">__METHOD__</span><span class="p">);</span>
		<span class="p">}</span>
 
		<span class="c1"># In the table 'revision' : Delete all the revision of the page where 'rev_page' = $id</span>
		<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="s1">'revision'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">'rev_page'</span><span class="o">=&gt;</span><span class="nv">$id</span><span class="p">),</span> <span class="nx">__METHOD__</span><span class="p">);</span>
 
		<span class="c1"># delete image links</span>
		<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span> <span class="s1">'imagelinks'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'il_from'</span> <span class="o">=&gt;</span> <span class="nv">$id</span> <span class="p">),</span> <span class="nx">__METHOD__</span><span class="p">);</span>			
		
		<span class="c1">####</span>
		<span class="c1">## then delete entries which are not in direct relation with the page: </span>
		<span class="c1">####</span>
		
		<span class="c1"># Clean up recentchanges entries...</span>
		<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span> <span class="s1">'recentchanges'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'rc_namespace'</span> <span class="o">=&gt;</span> <span class="nv">$ns</span><span class="p">,</span> <span class="s1">'rc_title'</span> <span class="o">=&gt;</span> <span class="nv">$t</span> <span class="p">),</span> <span class="nx">__METHOD__</span> <span class="p">);</span>
 
		<span class="c1"># read text entries for all archived pages and delete them.</span>
		<span class="nv">$res</span> <span class="o">=</span> <span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">select</span> <span class="p">(</span><span class="s1">'archive'</span><span class="p">,</span> <span class="s1">'ar_text_id'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'ar_namespace'</span> <span class="o">=&gt;</span> <span class="nv">$ns</span><span class="p">,</span> <span class="s1">'ar_title'</span> <span class="o">=&gt;</span> <span class="nv">$t</span> <span class="p">));</span>
		<span class="k">while</span><span class="p">(</span> <span class="nv">$row</span> <span class="o">=</span> <span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">fetchObject</span><span class="p">(</span><span class="nv">$res</span><span class="p">)</span> <span class="p">)</span> 
		<span class="p">{</span>
			<span class="nv">$value</span> <span class="o">=</span> <span class="nv">$row</span><span class="o">-&gt;</span><span class="na">ar_text_id</span><span class="p">;</span>
			<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="s1">'text'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">'old_id'</span><span class="o">=&gt;</span><span class="nv">$value</span><span class="p">),</span> <span class="nx">__METHOD__</span><span class="p">);</span>
		<span class="p">}</span>
 
		<span class="c1"># Clean archive entries...</span>
		<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span> <span class="s1">'archive'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'ar_namespace'</span> <span class="o">=&gt;</span> <span class="nv">$ns</span><span class="p">,</span> <span class="s1">'ar_title'</span> <span class="o">=&gt;</span> <span class="nv">$t</span> <span class="p">),</span> <span class="nx">__METHOD__</span> <span class="p">);</span>						
 
		<span class="c1"># Clean up log entries...</span>
		<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span> <span class="s1">'logging'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'log_namespace'</span> <span class="o">=&gt;</span> <span class="nv">$ns</span><span class="p">,</span> <span class="s1">'log_title'</span> <span class="o">=&gt;</span> <span class="nv">$t</span> <span class="p">),</span> <span class="nx">__METHOD__</span> <span class="p">);</span>
 
		<span class="c1"># Clean up watchlist...</span>
		<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span> <span class="s1">'watchlist'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'wl_namespace'</span> <span class="o">=&gt;</span> <span class="nv">$ns</span><span class="p">,</span> <span class="s1">'wl_title'</span> <span class="o">=&gt;</span> <span class="nv">$t</span> <span class="p">),</span> <span class="nx">__METHOD__</span> <span class="p">);</span>			
 
		<span class="c1"># In the table 'page' : Delete the page entry</span>
		<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span> <span class="s1">'page'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'page_id'</span> <span class="o">=&gt;</span> <span class="nv">$id</span> <span class="p">),</span> <span class="nx">__METHOD__</span><span class="p">);</span>	
 
		<span class="c1">####</span>
		<span class="c1">## If the article belongs to a category, update category counts </span>
		<span class="c1">####</span>
		<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$cats</span><span class="p">))</span>
		<span class="p">{</span>			
			<span class="k">foreach</span><span class="p">(</span><span class="nv">$cats</span> <span class="k">as</span> <span class="nv">$parentcat</span> <span class="o">=&gt;</span> <span class="nv">$currentarticle</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="nv">$catname</span> <span class="o">=</span> <span class="nb">split</span><span class="p">(</span><span class="s1">':'</span><span class="p">,</span> <span class="nv">$parentcat</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span> 
				<span class="nv">$cat</span> <span class="o">=</span> <span class="nx">Category</span><span class="o">::</span><span class="na">newFromName</span><span class="p">(</span><span class="nv">$catname</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
				<span class="nv">$cat</span><span class="o">-&gt;</span><span class="na">refreshCounts</span><span class="p">();</span>
			<span class="p">}</span>
		<span class="p">}</span>
 
		<span class="c1">####</span>
		<span class="c1">## If an image is beeing deleted, some extra work needs to be done</span>
		<span class="c1">####</span>
		<span class="k">if</span> <span class="p">(</span><span class="nv">$ns</span> <span class="o">==</span> <span class="nx">NS_IMAGE</span><span class="p">)</span>
		<span class="p">{</span>
 
			<span class="nv">$file</span> <span class="o">=</span> <span class="nx">wfFindFile</span><span class="p">(</span><span class="nv">$t</span><span class="p">);</span>
 
			<span class="k">if</span> <span class="p">(</span><span class="nv">$file</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="c1"># Get all filenames of old versions:</span>
				<span class="nv">$fields</span> <span class="o">=</span> <span class="nx">OldLocalFile</span><span class="o">::</span><span class="na">selectFields</span><span class="p">();</span>
				<span class="nv">$res</span> <span class="o">=</span> <span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">select</span> <span class="p">(</span><span class="s1">'oldimage'</span><span class="p">,</span> <span class="nv">$fields</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'oi_name'</span> <span class="o">=&gt;</span> <span class="nv">$t</span> <span class="p">));</span>
				<span class="k">while</span><span class="p">(</span> <span class="nv">$row</span> <span class="o">=</span> <span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">fetchObject</span><span class="p">(</span><span class="nv">$res</span><span class="p">)</span> <span class="p">)</span> 
				<span class="p">{</span>
					<span class="nv">$oldLocalFile</span> <span class="o">=</span> <span class="nx">OldLocalFile</span><span class="o">::</span><span class="na">newFromRow</span><span class="p">(</span><span class="nv">$row</span><span class="p">,</span> <span class="nv">$file</span><span class="o">-&gt;</span><span class="na">repo</span><span class="p">);</span>
					<span class="nv">$path</span> <span class="o">=</span> <span class="nv">$oldLocalFile</span><span class="o">-&gt;</span><span class="na">getArchivePath</span><span class="p">()</span><span class="o">.</span><span class="s1">'/'</span><span class="o">.</span><span class="nv">$oldLocalFile</span><span class="o">-&gt;</span><span class="na">getArchiveName</span><span class="p">();</span>
 
					<span class="k">try</span>
					<span class="p">{</span>
						<span class="c1"># Using the FileStore to delete the file</span>
						<span class="nv">$transaction</span> <span class="o">=</span> <span class="nx">FileStore</span><span class="o">::</span><span class="na">deleteFile</span><span class="p">(</span> <span class="nv">$path</span> <span class="p">);</span>
						<span class="nv">$transaction</span><span class="o">-&gt;</span><span class="na">commit</span><span class="p">();</span>
					<span class="p">}</span>
					<span class="k">catch</span> <span class="p">(</span><span class="nx">Exception</span> <span class="nv">$e</span><span class="p">)</span>
					<span class="p">{</span>
						<span class="nv">$wgOut</span><span class="o">-&gt;</span><span class="na">addHTML</span><span class="p">(</span><span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">());</span> 
					<span class="p">}</span>
				<span class="p">}</span>
 
				<span class="nv">$path</span> <span class="o">=</span> <span class="nv">$file</span><span class="o">-&gt;</span><span class="na">getPath</span><span class="p">();</span>
				<span class="k">try</span>
				<span class="p">{</span>
					<span class="c1"># Using the FileStore to delete the file itself</span>
					<span class="nv">$transaction</span> <span class="o">=</span> <span class="nx">FileStore</span><span class="o">::</span><span class="na">deleteFile</span><span class="p">(</span> <span class="nv">$path</span> <span class="p">);</span>
					<span class="nv">$transaction</span><span class="o">-&gt;</span><span class="na">commit</span><span class="p">();</span>		
				<span class="p">}</span>
				<span class="k">catch</span> <span class="p">(</span><span class="nx">Exception</span> <span class="nv">$e</span><span class="p">)</span>
				<span class="p">{</span>
					<span class="nv">$wgOut</span><span class="o">-&gt;</span><span class="na">addHTML</span><span class="p">(</span><span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">());</span> 
				<span class="p">}</span>
			<span class="p">}</span>
 
			<span class="c1"># clean the filearchive for the given filename:</span>
			<span class="nv">$fa_archive_name</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
			<span class="nv">$res</span> <span class="o">=</span> <span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">select</span> <span class="p">(</span><span class="s1">'filearchive'</span><span class="p">,</span> <span class="s1">'fa_storage_key'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'fa_name'</span> <span class="o">=&gt;</span> <span class="nv">$t</span> <span class="p">));</span>
 
			<span class="k">while</span><span class="p">(</span> <span class="nv">$row</span> <span class="o">=</span> <span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">fetchObject</span><span class="p">(</span><span class="nv">$res</span><span class="p">)</span> <span class="p">)</span> 
			<span class="p">{</span>
				<span class="nv">$key</span> <span class="o">=</span> <span class="nv">$row</span><span class="o">-&gt;</span><span class="na">fa_storage_key</span><span class="p">;</span>
 
				<span class="c1"># Using the FileStore to delete the file</span>
				<span class="nv">$store</span> <span class="o">=</span> <span class="nx">FileStore</span><span class="o">::</span><span class="na">get</span><span class="p">(</span> <span class="s1">'deleted'</span> <span class="p">);</span>
				<span class="nv">$transaction</span> <span class="o">=</span> <span class="nv">$store</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="nv">$key</span><span class="p">);</span>
				<span class="nv">$transaction</span><span class="o">-&gt;</span><span class="na">commit</span><span class="p">();</span>
			<span class="p">}</span>
 
 
			<span class="c1"># Delete old db entries of the image: </span>
			<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span> <span class="s1">'newimage'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'oi_name'</span> <span class="o">=&gt;</span> <span class="nv">$t</span> <span class="p">),</span> <span class="nx">__METHOD__</span> <span class="p">);</span>
 
			<span class="c1"># Delete archive entries of the image:</span>
			<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span> <span class="s1">'filearchive'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'fa_name'</span> <span class="o">=&gt;</span> <span class="nv">$t</span> <span class="p">),</span> <span class="nx">__METHOD__</span> <span class="p">);</span>
 
			<span class="c1"># Delete image entry:</span>
			<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span> <span class="s1">'image'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'img_name'</span> <span class="o">=&gt;</span> <span class="nv">$t</span> <span class="p">),</span> <span class="nx">__METHOD__</span> <span class="p">);</span>
 
			<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">commit</span><span class="p">();</span>
 
			<span class="nv">$linkCache</span> <span class="o">=</span> <span class="nx">LinkCache</span><span class="o">::</span><span class="na">singleton</span><span class="p">();</span>
			<span class="nv">$linkCache</span><span class="o">-&gt;</span><span class="na">clear</span><span class="p">();</span>
		<span class="p">}</span>
	<span class="p">}</span>
	
	<span class="k">function</span> <span class="nf">deletePermanentlyTalkPage</span><span class="p">(</span><span class="nv">$title</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="k">global</span> <span class="nv">$wgDeletePagePermanentlyNamespaces</span><span class="p">;</span>
 
		<span class="nv">$talkPage</span> <span class="o">=</span> <span class="nv">$title</span><span class="o">-&gt;</span><span class="na">getTalkPage</span><span class="p">();</span>
		<span class="nv">$id</span>       <span class="o">=</span> <span class="nv">$title</span><span class="o">-&gt;</span><span class="na">getArticleID</span><span class="p">();</span>
		<span class="nv">$ns</span>       <span class="o">=</span> <span class="nv">$title</span><span class="o">-&gt;</span><span class="na">getNamespace</span><span class="p">();</span>
		
		<span class="k">if</span> <span class="p">(</span> <span class="nv">$id</span> <span class="o">!=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nv">$wgDeletePagePermanentlyNamespaces</span><span class="p">[</span><span class="nv">$ns</span><span class="p">]</span> <span class="o">==</span> <span class="k">true</span> <span class="p">)</span>
		<span class="p">{</span>
			<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">deletePermanently</span><span class="p">(</span><span class="nv">$talkPage</span><span class="p">);</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></div>
<h3><span class="mw-headline" id="DeletePagePermanently.i18n.php">DeletePagePermanently.i18n.php</span></h3>
<div style="overflow:auto" class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
<span class="cp">&lt;?php</span>
<span class="sd">/**</span>
<span class="sd"> * DeletePagePermanently.i18n.php</span>
<span class="sd"> * Internationalisation file</span>
<span class="sd"> * based on Version 1.0 BETA from Ludovic MOUTON (2008)</span>
<span class="sd"> * Wolfgang Stöttinger 2008</span>
<span class="sd"> * v. 2.0 BETA</span>
<span class="sd"> * GPL</span>
<span class="sd"> */</span>

<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>

<span class="sd">/** English */</span>
<span class="nv">$messages</span><span class="p">[</span><span class="s1">'en'</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
	<span class="s1">'tab_label'</span> <span class="o">=&gt;</span> <span class="s1">'Delete permanently'</span><span class="p">,</span>
	<span class="s1">'del_impossible'</span> <span class="o">=&gt;</span> <span class="s1">'This page can not be deleted permanently'</span><span class="p">,</span>
	<span class="s1">'ask_deletion'</span> <span class="o">=&gt;</span> <span class="s1">'Are you sure, you want to delete this page permanently? All versions and log entries will be deleted. There is no chance to undo this process after completion.'</span><span class="p">,</span>
	<span class="s1">'yes'</span> <span class="o">=&gt;</span> <span class="s1">'Yes'</span><span class="p">,</span>
	<span class="s1">'del_done'</span> <span class="o">=&gt;</span> <span class="s1">'The page has been permanently deleted.'</span><span class="p">,</span>
	<span class="s1">'del_not_done'</span> <span class="o">=&gt;</span> <span class="s1">'The page has NOT been permanently deleted.'</span><span class="p">,</span>
	<span class="s1">'right-deleteperm'</span> <span class="o">=&gt;</span> <span class="s1">'Delete pages permanently'</span>
<span class="p">);</span>

<span class="sd">/** German (Deutsch) */</span>
<span class="nv">$messages</span><span class="p">[</span><span class="s1">'de'</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
	<span class="s1">'tab_label'</span> <span class="o">=&gt;</span> <span class="s1">'Dauerhaft löschen'</span><span class="p">,</span>
	<span class="s1">'del_impossible'</span> <span class="o">=&gt;</span> <span class="s1">'Diese Seite kann nicht dauerhaft gelöscht werden.'</span><span class="p">,</span>
	<span class="s1">'ask_deletion'</span> <span class="o">=&gt;</span> <span class="s1">'Sind Sie sicher, dass Sie diese Seite dauerhaft löschen wollen? Es werden alle Versionen und Logeinträge gelöscht. Danach besteht keine Möglichkeit, diesen Vorgang rückgängig zu machen.'</span><span class="p">,</span>
	<span class="s1">'yes'</span> <span class="o">=&gt;</span> <span class="s1">'Ja'</span><span class="p">,</span>
	<span class="s1">'del_done'</span> <span class="o">=&gt;</span> <span class="s1">'Diese Seite wurde dauerhaft gelöscht.'</span><span class="p">,</span>
	<span class="s1">'del_not_done'</span> <span class="o">=&gt;</span> <span class="s1">'Die Seite wurde nicht dauerhaft gelöscht.'</span><span class="p">,</span>
	<span class="s1">'right-deleteperm'</span> <span class="o">=&gt;</span> <span class="s1">'Dauerhaft löschen'</span>
<span class="p">);</span>

<span class="sd">/** French (Français) */</span>
<span class="nv">$messages</span><span class="p">[</span><span class="s1">'fr'</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
	<span class="s1">'tab_label'</span> <span class="o">=&gt;</span> <span class="s1">'Supprimer définitivement'</span><span class="p">,</span>
	<span class="s1">'del_impossible'</span> <span class="o">=&gt;</span> <span class="s1">'Cette page ne peut pas être supprimée définitivement.'</span><span class="p">,</span>
	<span class="s1">'ask_deletion'</span> <span class="o">=&gt;</span> <span class="s1">'Êtes-vous sûr de vouloir supprimer cette page définitivement ? Toutes les révisions et les entrées du log seront supprimées. Il sera impossible d\’annuler la suppression.'</span><span class="p">,</span>
	<span class="s1">'yes'</span> <span class="o">=&gt;</span> <span class="s1">'Oui'</span><span class="p">,</span>
	<span class="s1">'del_done'</span> <span class="o">=&gt;</span> <span class="s1">'La page a été supprimée définitivement.'</span><span class="p">,</span>
	<span class="s1">'del_not_done'</span> <span class="o">=&gt;</span> <span class="s1">'La page n\’a pas été supprimée définitivement.'</span><span class="p">,</span>
	<span class="s1">'right-deleteperm'</span> <span class="o">=&gt;</span> <span class="s1">'Supprimer définitivement'</span>
<span class="p">);</span>

<span class="sd">/** Italian (italiano) */</span>
<span class="nv">$messages</span><span class="p">[</span><span class="s1">'it'</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
	<span class="s1">'tab_label'</span> <span class="o">=&gt;</span> <span class="s1">'Cancella permanentemente'</span><span class="p">,</span>
	<span class="s1">'del_impossible'</span> <span class="o">=&gt;</span> <span class="s1">'Questa pagina non può essere cancellata permanentemente'</span><span class="p">,</span>
	<span class="s1">'ask_deletion'</span> <span class="o">=&gt;</span> <span class="s1">'Sei sicuro di voler cancellare permanentemente questa pagina? Tutte le vecchie versioni e i log relativi verranno cancellati. Questo processo una volta completato sarà irreversibile.'</span><span class="p">,</span>
	<span class="s1">'yes'</span> <span class="o">=&gt;</span> <span class="s1">'Sì'</span><span class="p">,</span>
	<span class="s1">'del_done'</span> <span class="o">=&gt;</span> <span class="s1">'La pagina è stata cancellata permanentemente con successo.'</span><span class="p">,</span>
	<span class="s1">'del_not_done'</span> <span class="o">=&gt;</span> <span class="s1">'La pagina NON è stata cancellata permanentemente.'</span><span class="p">,</span>
	<span class="s1">'right-deleteperm'</span> <span class="o">=&gt;</span> <span class="s1">'Cancella pagine permanentemente'</span>
<span class="p">);</span>

<span class="sd">/** Russian (Русский) */</span>
<span class="nv">$messages</span><span class="p">[</span><span class="s1">'ru'</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
	<span class="s1">'tab_label'</span> <span class="o">=&gt;</span> <span class="s1">'Удалить с концами'</span><span class="p">,</span>
	<span class="s1">'del_impossible'</span> <span class="o">=&gt;</span> <span class="s1">'Эту страницу невозможно удалить.'</span><span class="p">,</span>
	<span class="s1">'ask_deletion'</span> <span class="o">=&gt;</span> <span class="s1">'Вы собираетесь удалить страницу из БД. Все предыдущие версии записи и история изменений будут удалены без возможности восстановления. Вы уверены?'</span><span class="p">,</span>
	<span class="s1">'yes'</span> <span class="o">=&gt;</span> <span class="s1">'Да, удалить страницу'</span><span class="p">,</span>
	<span class="s1">'del_done'</span> <span class="o">=&gt;</span> <span class="s1">'Страница удалена.'</span><span class="p">,</span>
	<span class="s1">'del_not_done'</span> <span class="o">=&gt;</span> <span class="s1">'Страница НЕ удалена.'</span><span class="p">,</span>
	<span class="s1">'right-deleteperm'</span> <span class="o">=&gt;</span> <span class="s1">'Удалить с концами'</span>
<span class="p">);</span>

<span class="sd">/** Polish (Polski) */</span> 
<span class="nv">$messages</span><span class="p">[</span><span class="s1">'pl'</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span> 
	<span class="s1">'tab_label'</span> <span class="o">=&gt;</span> <span class="s1">'Usuń trwale'</span><span class="p">,</span>
	<span class="s1">'del_impossible'</span> <span class="o">=&gt;</span> <span class="s1">'Ta strona nie może zostać trwale usunięta'</span><span class="p">,</span>
	<span class="s1">'ask_deletion'</span> <span class="o">=&gt;</span> <span class="s1">'Czy na pewno chcesz trwale usunąć tę stronę? Wszystkie wersje oraz wpisy w historii zostaną usunięte. Nie będzie możliwości cofnąć tego procesu po jego zakończeniu.'</span><span class="p">,</span>
	<span class="s1">'yes'</span> <span class="o">=&gt;</span> <span class="s1">'Tak'</span><span class="p">,</span>
	<span class="s1">'del_done'</span> <span class="o">=&gt;</span> <span class="s1">'Ta strona została trwale usunięta.'</span><span class="p">,</span>
	<span class="s1">'del_not_done'</span> <span class="o">=&gt;</span> <span class="s1">'Ta strona nie została trwale usunięta.'</span><span class="p">,</span>
	<span class="s1">'right-deleteperm'</span> <span class="o">=&gt;</span> <span class="s1">'Usuń trwale'</span>
<span class="p">);</span> 

<span class="sd">/** Portuguese (Português) */</span>
<span class="nv">$messages</span><span class="p">[</span><span class="s1">'pt'</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
	<span class="s1">'tab_label'</span> <span class="o">=&gt;</span> <span class="s1">'Eliminar permanentemente'</span><span class="p">,</span>
	<span class="s1">'del_impossible'</span> <span class="o">=&gt;</span> <span class="s1">'Esta página não pode ser eliminada permanentemente'</span><span class="p">,</span>
	<span class="s1">'ask_deletion'</span> <span class="o">=&gt;</span> <span class="s1">'Tem certeza que quer eliminar esta página permanentemente? Todas as versões prévias e registros serão excluídos. Não há como reverter este processo após finalizado.'</span><span class="p">,</span>
	<span class="s1">'yes'</span> <span class="o">=&gt;</span> <span class="s1">'Sim'</span><span class="p">,</span>
	<span class="s1">'del_done'</span> <span class="o">=&gt;</span> <span class="s1">'A página foi eliminada permanentemente.'</span><span class="p">,</span>
	<span class="s1">'del_not_done'</span> <span class="o">=&gt;</span> <span class="s1">'A página NÃO foi eliminada.'</span><span class="p">,</span>
	<span class="s1">'right-deleteperm'</span> <span class="o">=&gt;</span> <span class="s1">'Eliminar permanentemente'</span>
<span class="p">);</span>
<span class="nv">$messages</span><span class="p">[</span><span class="s1">'pt-br'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$messages</span><span class="p">[</span><span class="s1">'pt'</span><span class="p">];</span> <span class="c1">//No differences here between Brazilian and European Portuguese</span>

<span class="sd">/** Spanish (Español-España)*/</span>
<span class="nv">$messages</span><span class="p">[</span><span class="s1">'es'</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
	<span class="s1">'tab_label'</span> <span class="o">=&gt;</span> <span class="s1">'Borrar permanentemente'</span><span class="p">,</span>
	<span class="s1">'del_impossible'</span> <span class="o">=&gt;</span> <span class="s1">'Esta página no se puede eliminar de forma permanente'</span><span class="p">,</span>
	<span class="s1">'ask_deletion'</span> <span class="o">=&gt;</span> <span class="s1">'¿Está seguro, que desea eliminar esta página de forma permanente? Todas las versiones y las entradas de registro serán borradas. No hay ninguna posibilidad de deshacer este proceso después de su finalización.'</span><span class="p">,</span>
	<span class="s1">'yes'</span> <span class="o">=&gt;</span> <span class="s1">'Si'</span><span class="p">,</span>
	<span class="s1">'del_done'</span> <span class="o">=&gt;</span> <span class="s1">'La página ha sido borrada permanentemente.'</span><span class="p">,</span>
	<span class="s1">'del_not_done'</span> <span class="o">=&gt;</span> <span class="s1">'La página no ha sido borrada permanentemente.'</span><span class="p">,</span>
	<span class="s1">'right-deleteperm'</span> <span class="o">=&gt;</span> <span class="s1">'Borrar permanentemente'</span>
<span class="p">);</span>

<span class="sd">/** Japanese（日本語） */</span>
<span class="nv">$messages</span><span class="p">[</span><span class="s1">'ja'</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
	<span class="s1">'tab_label'</span> <span class="o">=&gt;</span> <span class="s1">'完全削除'</span><span class="p">,</span>
	<span class="s1">'del_impossible'</span> <span class="o">=&gt;</span> <span class="s1">'このページは完全削除できません。'</span><span class="p">,</span>
	<span class="s1">'ask_deletion'</span> <span class="o">=&gt;</span> <span class="s1">'あなたはこのページを完全に削除しようとしています。このページに関するデータやログは完全に削除され、恒久的に復元することはできません。'</span><span class="p">,</span>
	<span class="s1">'yes'</span> <span class="o">=&gt;</span> <span class="s1">'上記の内容を完全に理解して完全削除する'</span><span class="p">,</span>
	<span class="s1">'del_done'</span> <span class="o">=&gt;</span> <span class="s1">'このページは完全に削除されました。'</span><span class="p">,</span>
	<span class="s1">'del_not_done'</span> <span class="o">=&gt;</span> <span class="s1">'完全削除ができませんでした。'</span><span class="p">,</span>
	<span class="s1">'right-deleteperm'</span> <span class="o">=&gt;</span> <span class="s1">'ページの完全削除'</span>
<span class="p">);</span> 
<span class="sd">/** Urdu */</span>
<span class="nv">$messages</span><span class="p">[</span><span class="s1">'ur'</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'tab_label'</span> <span class="o">=&gt;</span> <span class="s1">'مستقل حذف کریں'</span><span class="p">,</span>
        <span class="s1">'del_impossible'</span> <span class="o">=&gt;</span> <span class="s1">'یہ صفحہ مستقلا حذف نہیں ہو سکتا'</span><span class="p">,</span>
        <span class="s1">'ask_deletion'</span> <span class="o">=&gt;</span> <span class="s1">'کیا آپ واقعی اس صفحے کو مستقلا حذف کرنا چاہتے ہیں؟ تمام دوہرائیاں اور لاگ ساتھ ہی ختم ہو جائیں گے اور ان کی واپسی کا کوئی امکان نہیں۔'</span><span class="p">,</span>
        <span class="s1">'yes'</span> <span class="o">=&gt;</span> <span class="s1">'جی ہاں'</span><span class="p">,</span>
        <span class="s1">'del_done'</span> <span class="o">=&gt;</span> <span class="s1">'یہ صفحہ مستقلا حذف کر دیا گیا ہے '</span><span class="p">,</span>
        <span class="s1">'del_not_done'</span> <span class="o">=&gt;</span> <span class="s1">'یہ صفحہ مستقلا حذف نہیں کیا جا سکتا۔'</span><span class="p">,</span>
        <span class="s1">'right-deleteperm'</span> <span class="o">=&gt;</span> <span class="s1">'مستقل حذف'</span>
<span class="p">);</span>

<span class="sd">/** Simplified Chinese (简体中文) */</span>
<span class="nv">$messages</span><span class="p">[</span><span class="s1">'zh'</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'tab_label'</span> <span class="o">=&gt;</span> <span class="s1">'永久删除'</span><span class="p">,</span>
        <span class="s1">'del_impossible'</span> <span class="o">=&gt;</span> <span class="s1">'不允许永久删除这个（类）页面'</span><span class="p">,</span>
        <span class="s1">'ask_deletion'</span> <span class="o">=&gt;</span> <span class="s1">'你确定要永久删除这个页面吗？所有版本、日志记录将一并删除。一旦删除完成后就不能撤销。'</span><span class="p">,</span>
        <span class="s1">'yes'</span> <span class="o">=&gt;</span> <span class="s1">'确认'</span><span class="p">,</span>
        <span class="s1">'del_done'</span> <span class="o">=&gt;</span> <span class="s1">'这个页面已被永久删除。'</span><span class="p">,</span>
        <span class="s1">'del_not_done'</span> <span class="o">=&gt;</span> <span class="s1">'这个页面未被永久删除。'</span><span class="p">,</span>
        <span class="s1">'right-deleteperm'</span> <span class="o">=&gt;</span> <span class="s1">'永久删除页面'</span>
<span class="p">);</span>
<span class="nv">$messages</span><span class="p">[</span><span class="s1">'zh-hans'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$messages</span><span class="p">[</span><span class="s1">'zh-cn'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$messages</span><span class="p">[</span><span class="s1">'zh-sg'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$messages</span><span class="p">[</span><span class="s1">'zh-my'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$messages</span><span class="p">[</span><span class="s1">'zh'</span><span class="p">];</span>

<span class="sd">/** Traditional Chinese (繁體中文) */</span>
<span class="nv">$messages</span><span class="p">[</span><span class="s1">'zh-hant'</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'tab_label'</span> <span class="o">=&gt;</span> <span class="s1">'永久刪除'</span><span class="p">,</span>
        <span class="s1">'del_impossible'</span> <span class="o">=&gt;</span> <span class="s1">'不允許永久刪除這個（類）頁面'</span><span class="p">,</span>
        <span class="s1">'ask_deletion'</span> <span class="o">=&gt;</span> <span class="s1">'你確定要永久刪除這個頁面嗎？所有版本、日誌記錄將一併刪除。一旦刪除完成後就不能撤銷。'</span><span class="p">,</span>
        <span class="s1">'yes'</span> <span class="o">=&gt;</span> <span class="s1">'確認'</span><span class="p">,</span>
        <span class="s1">'del_done'</span> <span class="o">=&gt;</span> <span class="s1">'這個頁面已被永久刪除。'</span><span class="p">,</span>
        <span class="s1">'del_not_done'</span> <span class="o">=&gt;</span> <span class="s1">'這個頁面未被永久刪除。'</span><span class="p">,</span>
        <span class="s1">'right-deleteperm'</span> <span class="o">=&gt;</span> <span class="s1">'永久刪除頁面'</span>
<span class="p">);</span>
<span class="nv">$messages</span><span class="p">[</span><span class="s1">'zh-hk'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$messages</span><span class="p">[</span><span class="s1">'zh-tw'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$messages</span><span class="p">[</span><span class="s1">'zh-mo'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$messages</span><span class="p">[</span><span class="s1">'zh-hant'</span><span class="p">];</span>
</pre></div>
<h2><span class="mw-headline" id="MediaWiki_1.16.x_.28or_later.29">MediaWiki 1.16.x (or later)</span></h2>
<p>If you are using MediaWiki 1.16.x (or later), please use the following code as DeletePagePermanently.php</p>
<div style="overflow:auto" class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
<span class="cp">&lt;?php</span>
<span class="sd">/**</span>
<span class="sd"> * DeletePagePermanently.php</span>
<span class="sd"> * based on Version 1.0 BETA from Ludovic MOUTON (2008)</span>
<span class="sd"> * Wolfgang Stöttinger 2008</span>
<span class="sd"> * v. 2.1.3 BETA</span>
<span class="sd"> * GPL</span>
<span class="sd"> * </span>
<span class="sd"> * BE CAREFUL WHEN USING THIS EXTENSION. ONCE A PAGE IS DELETED, IT CAN NOT BE RESTORED ANY MORE.</span>
<span class="sd"> * Changed in Version 2.1.3:</span>
<span class="sd"> *		- Correctly displays on Vector skin</span>
<span class="sd"> *		- Also deletes thumbnails on images</span>
<span class="sd"> *		- Using alternate methods to delete files due do deprecation of FileStore in MW 1.16.x</span>
<span class="sd"> * Changed in Version 2.1.2:</span>
<span class="sd"> *		- Update category count</span>
<span class="sd"> * Changed in Version 2.1.1:</span>
<span class="sd"> *		- Title is removed from cache.</span>
<span class="sd"> * Changed in Version 2.1.0:</span>
<span class="sd"> *		- deletePage() can now be used from outside in PHP.</span>
<span class="sd"> * </span>
<span class="sd"> * Features of Version 2.0:</span>
<span class="sd"> *		- defined $wgDeletePagePermanentlyNamespaces as an array of namespaces in which pages can be deleted.</span>
<span class="sd"> * 			$wgDeletePagePermanentlyNamespaces = array (</span>
<span class="sd"> * 				NS_MAIN =&gt; true,</span>
<span class="sd"> *				NS_IMAGE =&gt; true,</span>
<span class="sd"> * 				NS_CATEGORY =&gt; true,</span>
<span class="sd"> * 				NS_TEMPLATE =&gt; true,</span>
<span class="sd"> * 				NS_TALK =&gt; true,</span>
<span class="sd"> * 			);</span>
<span class="sd"> *		</span>
<span class="sd"> *		- The tab "Delete permanently" is only shown on pages that can be deleted.</span>
<span class="sd"> * 		- An aditional page to approve the deletion</span>
<span class="sd"> *		- Also log entries are deleted.</span>
<span class="sd"> *		- Also redirects, external links, language links, searchindex entries, page_restrictions, pagelinks, categorylinks, templatelinks, archive entries and image links are deleted.</span>
<span class="sd"> * 		- The watchlist entries are also removed.</span>
<span class="sd"> *		- If the page is an image page, all versions of the image are deleted from the database, the archive and the filesystem. (Thumbnlais won't be removed)</span>
<span class="sd">*/</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">defined</span><span class="p">(</span><span class="s1">'MEDIAWIKI'</span><span class="p">))</span> <span class="p">{</span>
	<span class="k">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>

<span class="nv">$wgExtensionCredits</span><span class="p">[</span><span class="s1">'other'</span><span class="p">][]</span> <span class="o">=</span> <span class="k">array</span> <span class="p">(</span>
	<span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="s1">'DeletePagePermanently'</span><span class="p">,</span>
	<span class="s1">'version'</span> <span class="o">=&gt;</span> <span class="s1">'2.1'</span><span class="p">,</span>
	<span class="s1">'author'</span> <span class="o">=&gt;</span> <span class="s1">'Ludovic MOUTON, Wolfgang STÖTTINGER'</span><span class="p">,</span>
	<span class="s1">'description'</span> <span class="o">=&gt;</span> <span class="s1">'Adds a new delete tab to each page. Pages are deleted permanently from the database.'</span><span class="p">,</span>
	<span class="s1">'url'</span> <span class="o">=&gt;</span> <span class="s1">'http://www.mediawiki.org/wiki/Extension:DeletePagePermanently'</span><span class="p">,</span>
<span class="p">);</span>

<span class="c1"># Default settings</span>
<span class="nv">$wgGroupPermissions</span><span class="p">[</span><span class="s1">'*'</span><span class="p">][</span><span class="s1">'deleteperm'</span><span class="p">]</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
<span class="nv">$wgGroupPermissions</span><span class="p">[</span><span class="s1">'user'</span><span class="p">][</span><span class="s1">'deleteperm'</span><span class="p">]</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
<span class="nv">$wgGroupPermissions</span><span class="p">[</span><span class="s1">'bureaucrat'</span><span class="p">][</span><span class="s1">'deleteperm'</span><span class="p">]</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
<span class="nv">$wgGroupPermissions</span><span class="p">[</span><span class="s1">'sysop'</span><span class="p">][</span><span class="s1">'deleteperm'</span><span class="p">]</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>

<span class="nv">$wgDeletePagePermanentlyNamespaces</span> <span class="o">=</span> <span class="k">array</span> <span class="p">(</span>
	<span class="nx">NS_MAIN</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
	<span class="nx">NS_IMAGE</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
	<span class="nx">NS_CATEGORY</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
	<span class="nx">NS_TEMPLATE</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
	<span class="nx">NS_TALK</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
<span class="p">);</span>

<span class="nv">$wgExtensionMessagesFiles</span><span class="p">[</span><span class="s1">'DeletePagePermanently'</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dirname</span><span class="p">(</span><span class="k">__FILE__</span><span class="p">)</span> <span class="o">.</span> <span class="s1">'/DeletePagePermanently.i18n.php'</span><span class="p">;</span>

<span class="nv">$wgExtensionFunctions</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'wfDeletePagePermanently'</span><span class="p">;</span>

<span class="k">function</span> <span class="nf">wfDeletePagePermanently</span><span class="p">()</span> <span class="p">{</span>
	<span class="k">new</span> <span class="nx">DeletePagePermanently</span><span class="p">();</span>
	<span class="k">return</span> <span class="k">true</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">DeletePagePermanently</span>
<span class="p">{</span>
	<span class="k">function</span> <span class="nf">DeletePagePermanently</span><span class="p">()</span> <span class="p">{</span>
		<span class="k">global</span> <span class="nv">$wgHooks</span><span class="p">,</span> <span class="nv">$wgMessageCache</span><span class="p">,</span> <span class="nv">$wgUser</span><span class="p">;</span>

		<span class="nx">wfLoadExtensionMessages</span><span class="p">(</span><span class="s1">'DeletePagePermanently'</span><span class="p">);</span>

		<span class="nv">$wgMessageCache</span><span class="o">-&gt;</span><span class="na">addMessage</span><span class="p">(</span><span class="s1">'delete_permanently'</span><span class="p">,</span> <span class="nx">wfMsg</span><span class="p">(</span><span class="s1">'tab_label'</span><span class="p">));</span>
		<span class="nv">$wgHooks</span><span class="p">[</span><span class="s1">'SkinTemplateContentActions'</span><span class="p">][]</span> <span class="o">=</span> <span class="k">array</span> <span class="p">(</span>
			<span class="o">&amp;</span><span class="nv">$this</span><span class="p">,</span>
			<span class="s1">'AddContentHook'</span>
		<span class="p">);</span>

		<span class="nv">$wgHooks</span><span class="p">[</span><span class="s1">'SkinTemplateNavigation'</span><span class="p">][]</span> <span class="o">=</span> <span class="k">array</span> <span class="p">(</span>
			<span class="o">&amp;</span><span class="nv">$this</span><span class="p">,</span>
			<span class="s1">'AddVectorHook'</span>
		<span class="p">);</span>

		<span class="nv">$wgHooks</span><span class="p">[</span><span class="s1">'UnknownAction'</span><span class="p">][]</span> <span class="o">=</span> <span class="k">array</span> <span class="p">(</span>
			<span class="o">&amp;</span><span class="nv">$this</span><span class="p">,</span>
			<span class="s1">'AddActionHook'</span>
		<span class="p">);</span>
	<span class="p">}</span>

	<span class="k">function</span> <span class="nf">AddContentHook</span><span class="p">(</span><span class="o">&amp;</span><span class="nv">$content_actions</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">global</span> <span class="nv">$wgRequest</span><span class="p">,</span> <span class="nv">$wgRequest</span><span class="p">,</span> <span class="nv">$wgTitle</span><span class="p">,</span> <span class="nv">$wgUser</span><span class="p">,</span> <span class="nv">$wgDeletePagePermanentlyNamespaces</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$wgUser</span><span class="o">-&gt;</span><span class="na">isAllowed</span><span class="p">(</span><span class="s1">'deleteperm'</span><span class="p">))</span>
			<span class="k">return</span> <span class="k">false</span><span class="p">;</span>

		<span class="nv">$action</span> <span class="o">=</span> <span class="nv">$wgRequest</span><span class="o">-&gt;</span><span class="na">getText</span><span class="p">(</span><span class="s1">'action'</span><span class="p">);</span>


		<span class="c1">#Special pages can not be deleted (special pages have no article id anyway).</span>
		<span class="k">if</span> <span class="p">(</span><span class="nv">$wgTitle</span><span class="o">-&gt;</span><span class="na">getArticleID</span><span class="p">()</span> <span class="o">!=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nv">$wgDeletePagePermanentlyNamespaces</span><span class="p">[</span><span class="nv">$wgTitle</span><span class="o">-&gt;</span><span class="na">getNamespace</span><span class="p">()]</span> <span class="o">==</span> <span class="k">true</span> <span class="o">&amp;&amp;</span> <span class="nv">$wgTitle</span><span class="o">-&gt;</span><span class="na">getNamespace</span><span class="p">()</span> <span class="o">!=</span> <span class="nx">NS_SPECIAL</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">wfLoadExtensionMessages</span><span class="p">(</span><span class="s1">'DeletePagePermanently'</span><span class="p">);</span>

			<span class="nv">$content_actions</span><span class="p">[</span><span class="s1">'ask_delete_permanently'</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span> <span class="p">(</span>
				<span class="s1">'class'</span> <span class="o">=&gt;</span> <span class="nv">$action</span> <span class="o">==</span> <span class="s1">'ask_delete_permanently'</span> <span class="o">?</span> <span class="s1">'selected'</span> <span class="o">:</span> <span class="k">false</span><span class="p">,</span>
				<span class="s1">'text'</span> <span class="o">=&gt;</span> <span class="nx">wfMsg</span><span class="p">(</span><span class="s1">'tab_label'</span><span class="p">),</span>
				<span class="s1">'href'</span> <span class="o">=&gt;</span> <span class="nv">$wgTitle</span><span class="o">-&gt;</span><span class="na">getLocalUrl</span><span class="p">(</span><span class="s1">'action=ask_delete_permanently'</span><span class="p">)</span>
			<span class="p">);</span>
		<span class="p">}</span>

		<span class="k">return</span> <span class="k">true</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">function</span> <span class="nf">AddVectorHook</span><span class="p">(</span><span class="o">&amp;</span><span class="nv">$sktemplate</span><span class="p">,</span> <span class="o">&amp;</span><span class="nv">$links</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">global</span> <span class="nv">$wgRequest</span><span class="p">,</span> <span class="nv">$wgRequest</span><span class="p">,</span> <span class="nv">$wgTitle</span><span class="p">,</span> <span class="nv">$wgUser</span><span class="p">,</span> <span class="nv">$wgDeletePagePermanentlyNamespaces</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$wgUser</span><span class="o">-&gt;</span><span class="na">isAllowed</span><span class="p">(</span><span class="s1">'deleteperm'</span><span class="p">))</span>
			<span class="k">return</span> <span class="k">false</span><span class="p">;</span>

		<span class="nv">$action</span> <span class="o">=</span> <span class="nv">$wgRequest</span><span class="o">-&gt;</span><span class="na">getText</span><span class="p">(</span><span class="s1">'action'</span><span class="p">);</span>


		<span class="c1">#Special pages can not be deleted (special pages have no article id anyway).</span>
		<span class="k">if</span> <span class="p">(</span><span class="nv">$wgTitle</span><span class="o">-&gt;</span><span class="na">getArticleID</span><span class="p">()</span> <span class="o">!=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nv">$wgDeletePagePermanentlyNamespaces</span><span class="p">[</span><span class="nv">$wgTitle</span><span class="o">-&gt;</span><span class="na">getNamespace</span><span class="p">()]</span> <span class="o">==</span> <span class="k">true</span> <span class="o">&amp;&amp;</span> <span class="nv">$wgTitle</span><span class="o">-&gt;</span><span class="na">getNamespace</span><span class="p">()</span> <span class="o">!=</span> <span class="nx">NS_SPECIAL</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">wfLoadExtensionMessages</span><span class="p">(</span><span class="s1">'DeletePagePermanently'</span><span class="p">);</span>

			<span class="nv">$links</span><span class="p">[</span><span class="s1">'actions'</span><span class="p">][</span><span class="s1">'ask_delete_permanently'</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span> <span class="p">(</span>
				<span class="s1">'class'</span> <span class="o">=&gt;</span> <span class="nv">$action</span> <span class="o">==</span> <span class="s1">'ask_delete_permanently'</span> <span class="o">?</span> <span class="s1">'selected'</span> <span class="o">:</span> <span class="k">false</span><span class="p">,</span>
				<span class="s1">'text'</span> <span class="o">=&gt;</span> <span class="nx">wfMsg</span><span class="p">(</span><span class="s1">'delete_permanently'</span><span class="p">),</span>
				<span class="s1">'href'</span> <span class="o">=&gt;</span> <span class="nv">$wgTitle</span><span class="o">-&gt;</span><span class="na">getLocalUrl</span><span class="p">(</span><span class="s1">'action=ask_delete_permanently'</span><span class="p">)</span>
			<span class="p">);</span>
		<span class="p">}</span>

		<span class="k">return</span> <span class="k">true</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">function</span> <span class="nf">AddActionHook</span><span class="p">(</span><span class="nv">$action</span><span class="p">,</span> <span class="nv">$wgArticle</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">global</span> <span class="nv">$wgOut</span><span class="p">,</span> <span class="nv">$wgUser</span><span class="p">,</span> <span class="nv">$wgDeletePagePermanentlyNamespaces</span><span class="p">;</span>

		<span class="nx">wfLoadExtensionMessages</span><span class="p">(</span><span class="s1">'DeletePagePermanently'</span><span class="p">);</span>

		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$wgUser</span><span class="o">-&gt;</span><span class="na">isAllowed</span><span class="p">(</span><span class="s1">'deleteperm'</span><span class="p">))</span> <span class="p">{</span>
			<span class="nv">$wgOut</span><span class="o">-&gt;</span><span class="na">permissionRequired</span><span class="p">(</span><span class="s1">'deleteperm'</span><span class="p">);</span>
			<span class="k">return</span> <span class="k">false</span><span class="p">;</span>
		<span class="p">}</span>

		<span class="c1"># Print a form to approve deletion</span>
		<span class="k">if</span> <span class="p">(</span><span class="nv">$action</span> <span class="o">==</span> <span class="s1">'ask_delete_permanently'</span><span class="p">)</span> <span class="p">{</span>

			<span class="nv">$action</span> <span class="o">=</span> <span class="nv">$wgArticle</span><span class="o">-&gt;</span><span class="na">getTitle</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">escapeLocalUrl</span><span class="p">()</span> <span class="o">.</span> <span class="s2">"&amp;action=delete_permanently"</span><span class="p">;</span>
			<span class="nv">$wgOut</span><span class="o">-&gt;</span><span class="na">addHTML</span><span class="p">(</span><span class="s2">"&lt;form id='ask_delete_permanently' method='post' action=</span><span class="se">\"</span><span class="si">$action\</span><span class="s2">"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">table</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">td</span><span class="o">&gt;</span><span class="s2">" . wfMsg('ask_deletion') . "</span><span class="o">&lt;/</span><span class="nx">td</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="nx">tr</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">td</span><span class="o">&gt;&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s1">'submit'</span> <span class="nx">name</span><span class="o">=</span><span class="s1">'submit'</span> <span class="nx">value</span><span class="o">=</span><span class="nx">\</span><span class="s2">""</span> <span class="o">.</span> <span class="nx">wfMsg</span><span class="p">(</span><span class="s1">'yes'</span><span class="p">)</span> <span class="o">.</span> <span class="s2">"</span><span class="se">\"</span><span class="s2"> /&gt;&lt;/td&gt;</span>
<span class="s2">        &lt;/tr&gt;</span>
<span class="s2">&lt;/table&gt;&lt;/form&gt;"</span><span class="p">);</span>
			<span class="k">return</span> <span class="k">false</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="c1"># Perform actual deletion</span>
		<span class="k">elseif</span> <span class="p">(</span><span class="nv">$action</span> <span class="o">==</span> <span class="s1">'delete_permanently'</span><span class="p">)</span> <span class="p">{</span>
			<span class="nv">$ns</span> <span class="o">=</span> <span class="nv">$wgArticle</span><span class="o">-&gt;</span><span class="na">mTitle</span><span class="o">-&gt;</span><span class="na">getNamespace</span><span class="p">();</span>
			<span class="nv">$t</span> <span class="o">=</span> <span class="nv">$wgArticle</span><span class="o">-&gt;</span><span class="na">mTitle</span><span class="o">-&gt;</span><span class="na">getDBkey</span><span class="p">();</span>
			<span class="nv">$id</span> <span class="o">=</span> <span class="nv">$wgArticle</span><span class="o">-&gt;</span><span class="na">mTitle</span><span class="o">-&gt;</span><span class="na">getArticleID</span><span class="p">();</span>

			<span class="k">if</span> <span class="p">(</span><span class="nv">$t</span> <span class="o">==</span> <span class="s1">''</span> <span class="o">||</span> <span class="nv">$id</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="nv">$wgDeletePagePermanentlyNamespaces</span><span class="p">[</span><span class="nv">$ns</span><span class="p">]</span> <span class="o">!=</span> <span class="k">true</span> <span class="o">||</span> <span class="nv">$ns</span> <span class="o">==</span> <span class="nx">NS_SPECIAL</span><span class="p">)</span> <span class="p">{</span>
				<span class="nv">$wgOut</span><span class="o">-&gt;</span><span class="na">addHTML</span><span class="p">(</span><span class="nx">wfMsgHtml</span><span class="p">(</span><span class="s1">'del_impossible'</span><span class="p">));</span>
				<span class="k">return</span> <span class="k">false</span><span class="p">;</span>
			<span class="p">}</span>

			<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">deletePermanently</span><span class="p">(</span><span class="nv">$wgArticle</span><span class="o">-&gt;</span><span class="na">mTitle</span><span class="p">);</span>
			<span class="nv">$wgOut</span><span class="o">-&gt;</span><span class="na">addHTML</span><span class="p">(</span><span class="nx">wfMsgHtml</span><span class="p">(</span><span class="s1">'del_done'</span><span class="p">));</span>
			<span class="k">return</span> <span class="k">false</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="c1">//$wgOut-&gt;addHTML(wfMsgHtml('del_not_done'));</span>
		<span class="k">return</span> <span class="k">true</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">function</span> <span class="nf">deletePermanently</span><span class="p">(</span><span class="nv">$title</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">global</span> <span class="nv">$wgOut</span><span class="p">;</span>

		<span class="nv">$ns</span> <span class="o">=</span> <span class="nv">$title</span><span class="o">-&gt;</span><span class="na">getNamespace</span><span class="p">();</span>
		<span class="nv">$t</span> <span class="o">=</span> <span class="nv">$title</span><span class="o">-&gt;</span><span class="na">getDBkey</span><span class="p">();</span>
		<span class="nv">$id</span> <span class="o">=</span> <span class="nv">$title</span><span class="o">-&gt;</span><span class="na">getArticleID</span><span class="p">();</span>
		<span class="nv">$cats</span> <span class="o">=</span> <span class="nv">$title</span><span class="o">-&gt;</span><span class="na">getParentCategories</span><span class="p">();</span>

		<span class="nv">$dbw</span> <span class="o">=</span> <span class="nx">wfGetDB</span><span class="p">(</span><span class="nx">DB_MASTER</span><span class="p">);</span>

		<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">begin</span><span class="p">();</span>

		<span class="c1">####</span>
		<span class="c1">## First delete entries, which are in direct relation with the page:</span>
		<span class="c1">####</span>

		<span class="c1"># delete redirect...</span>
		<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="s1">'redirect'</span><span class="p">,</span> <span class="k">array</span> <span class="p">(</span><span class="s1">'rd_from'</span> <span class="o">=&gt;</span> <span class="nv">$id</span><span class="p">),</span> <span class="nx">__METHOD__</span><span class="p">);</span>

		<span class="c1"># delete external link...</span>
		<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="s1">'externallinks'</span><span class="p">,</span> <span class="k">array</span> <span class="p">(</span><span class="s1">'el_from'</span> <span class="o">=&gt;</span> <span class="nv">$id</span><span class="p">),</span> <span class="nx">__METHOD__</span><span class="p">);</span>

		<span class="c1"># delete language link...</span>
		<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="s1">'langlinks'</span><span class="p">,</span> <span class="k">array</span> <span class="p">(</span><span class="s1">'ll_from'</span> <span class="o">=&gt;</span> <span class="nv">$id</span><span class="p">),</span> <span class="nx">__METHOD__</span><span class="p">);</span>

		<span class="c1"># delete search index...</span>
		<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="s1">'searchindex'</span><span class="p">,</span> <span class="k">array</span> <span class="p">(</span><span class="s1">'si_page'</span> <span class="o">=&gt;</span> <span class="nv">$id</span><span class="p">),</span> <span class="nx">__METHOD__</span><span class="p">);</span>

		<span class="c1"># Delete restrictions for the page</span>
		<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="s1">'page_restrictions'</span><span class="p">,</span> <span class="k">array</span> <span class="p">(</span><span class="s1">'pr_page'</span> <span class="o">=&gt;</span> <span class="nv">$id</span><span class="p">),</span> <span class="nx">__METHOD__</span><span class="p">);</span>

		<span class="c1"># Delete page Links</span>
		<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="s1">'pagelinks'</span><span class="p">,</span> <span class="k">array</span> <span class="p">(</span><span class="s1">'pl_from'</span> <span class="o">=&gt;</span> <span class="nv">$id</span><span class="p">),</span> <span class="nx">__METHOD__</span><span class="p">);</span>

		<span class="c1"># delete category links</span>
		<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="s1">'categorylinks'</span><span class="p">,</span> <span class="k">array</span> <span class="p">(</span><span class="s1">'cl_from'</span> <span class="o">=&gt;</span> <span class="nv">$id</span><span class="p">),</span> <span class="nx">__METHOD__</span><span class="p">);</span>

		<span class="c1"># delete template links</span>
		<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="s1">'templatelinks'</span><span class="p">,</span> <span class="k">array</span> <span class="p">(</span><span class="s1">'tl_from'</span> <span class="o">=&gt;</span> <span class="nv">$id</span><span class="p">),</span> <span class="nx">__METHOD__</span><span class="p">);</span>

		<span class="c1"># read text entries for all revisions and delete them.</span>
		<span class="nv">$res</span> <span class="o">=</span> <span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">select</span><span class="p">(</span><span class="s1">'revision'</span><span class="p">,</span> <span class="s1">'rev_text_id'</span><span class="p">,</span> <span class="s2">"rev_page=</span><span class="si">$id</span><span class="s2">"</span><span class="p">);</span>

		<span class="k">while</span> <span class="p">(</span><span class="nv">$row</span> <span class="o">=</span> <span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">fetchObject</span><span class="p">(</span><span class="nv">$res</span><span class="p">))</span> <span class="p">{</span>
			<span class="nv">$value</span> <span class="o">=</span> <span class="nv">$row</span><span class="o">-&gt;</span><span class="na">rev_text_id</span><span class="p">;</span>
			<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="s1">'text'</span><span class="p">,</span> <span class="k">array</span> <span class="p">(</span><span class="s1">'old_id'</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">),</span> <span class="nx">__METHOD__</span><span class="p">);</span>
		<span class="p">}</span>

		<span class="c1"># In the table 'revision' : Delete all the revision of the page where 'rev_page' = $id</span>
		<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="s1">'revision'</span><span class="p">,</span> <span class="k">array</span> <span class="p">(</span><span class="s1">'rev_page'</span> <span class="o">=&gt;</span> <span class="nv">$id</span><span class="p">),</span> <span class="nx">__METHOD__</span><span class="p">);</span>

		<span class="c1"># delete image links</span>
		<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="s1">'imagelinks'</span><span class="p">,</span> <span class="k">array</span> <span class="p">(</span><span class="s1">'il_from'</span> <span class="o">=&gt;</span> <span class="nv">$id</span><span class="p">),</span> <span class="nx">__METHOD__</span><span class="p">);</span>

		<span class="c1">####</span>
		<span class="c1">## then delete entries which are not in direct relation with the page:</span>
		<span class="c1">####</span>

		<span class="c1"># Clean up recentchanges entries...</span>
		<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="s1">'recentchanges'</span><span class="p">,</span> <span class="k">array</span> <span class="p">(</span>
			<span class="s1">'rc_namespace'</span> <span class="o">=&gt;</span> <span class="nv">$ns</span><span class="p">,</span>
			<span class="s1">'rc_title'</span> <span class="o">=&gt;</span> <span class="nv">$t</span>
		<span class="p">),</span> <span class="nx">__METHOD__</span><span class="p">);</span>

		<span class="c1"># read text entries for all archived pages and delete them.</span>
		<span class="nv">$res</span> <span class="o">=</span> <span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">select</span><span class="p">(</span><span class="s1">'archive'</span><span class="p">,</span> <span class="s1">'ar_text_id'</span><span class="p">,</span> <span class="k">array</span> <span class="p">(</span>
			<span class="s1">'ar_namespace'</span> <span class="o">=&gt;</span> <span class="nv">$ns</span><span class="p">,</span>
			<span class="s1">'ar_title'</span> <span class="o">=&gt;</span> <span class="nv">$t</span>
		<span class="p">));</span>

		<span class="k">while</span> <span class="p">(</span><span class="nv">$row</span> <span class="o">=</span> <span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">fetchObject</span><span class="p">(</span><span class="nv">$res</span><span class="p">))</span> <span class="p">{</span>
			<span class="nv">$value</span> <span class="o">=</span> <span class="nv">$row</span><span class="o">-&gt;</span><span class="na">ar_text_id</span><span class="p">;</span>
			<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="s1">'text'</span><span class="p">,</span> <span class="k">array</span> <span class="p">(</span><span class="s1">'old_id'</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">),</span> <span class="nx">__METHOD__</span><span class="p">);</span>
		<span class="p">}</span>

		<span class="c1"># Clean archive entries...</span>
		<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="s1">'archive'</span><span class="p">,</span> <span class="k">array</span> <span class="p">(</span>
			<span class="s1">'ar_namespace'</span> <span class="o">=&gt;</span> <span class="nv">$ns</span><span class="p">,</span>
			<span class="s1">'ar_title'</span> <span class="o">=&gt;</span> <span class="nv">$t</span>
		<span class="p">),</span> <span class="nx">__METHOD__</span><span class="p">);</span>

		<span class="c1"># Clean up log entries...</span>
		<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="s1">'logging'</span><span class="p">,</span> <span class="k">array</span> <span class="p">(</span>
			<span class="s1">'log_namespace'</span> <span class="o">=&gt;</span> <span class="nv">$ns</span><span class="p">,</span>
			<span class="s1">'log_title'</span> <span class="o">=&gt;</span> <span class="nv">$t</span>
		<span class="p">),</span> <span class="nx">__METHOD__</span><span class="p">);</span>

		<span class="c1"># Clean up watchlist...</span>
		<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="s1">'watchlist'</span><span class="p">,</span> <span class="k">array</span> <span class="p">(</span>
			<span class="s1">'wl_namespace'</span> <span class="o">=&gt;</span> <span class="nv">$ns</span><span class="p">,</span>
			<span class="s1">'wl_title'</span> <span class="o">=&gt;</span> <span class="nv">$t</span>
		<span class="p">),</span> <span class="nx">__METHOD__</span><span class="p">);</span>

		<span class="c1"># In the table 'page' : Delete the page entry</span>
		<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="s1">'page'</span><span class="p">,</span> <span class="k">array</span> <span class="p">(</span><span class="s1">'page_id'</span> <span class="o">=&gt;</span> <span class="nv">$id</span><span class="p">),</span> <span class="nx">__METHOD__</span><span class="p">);</span>

		<span class="c1">####</span>
		<span class="c1">## If the article belongs to a category, update category counts</span>
		<span class="c1">####</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$cats</span><span class="p">))</span> <span class="p">{</span>
			<span class="k">foreach</span> <span class="p">(</span><span class="nv">$cats</span> <span class="k">as</span> <span class="nv">$parentcat</span> <span class="o">=&gt;</span> <span class="nv">$currentarticle</span><span class="p">)</span> <span class="p">{</span>
				<span class="nv">$catname</span> <span class="o">=</span> <span class="nb">split</span><span class="p">(</span><span class="s1">':'</span><span class="p">,</span> <span class="nv">$parentcat</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
				<span class="nv">$cat</span> <span class="o">=</span> <span class="nx">Category</span><span class="o">::</span><span class="na">newFromName</span><span class="p">(</span><span class="nv">$catname</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
				<span class="nv">$cat</span><span class="o">-&gt;</span><span class="na">refreshCounts</span><span class="p">();</span>
			<span class="p">}</span>
		<span class="p">}</span>

		<span class="c1">####</span>
		<span class="c1">## If an image is beeing deleted, some extra work needs to be done</span>
		<span class="c1">####</span>
		<span class="k">if</span> <span class="p">(</span><span class="nv">$ns</span> <span class="o">==</span> <span class="nx">NS_IMAGE</span><span class="p">)</span> <span class="p">{</span>

			<span class="nv">$file</span> <span class="o">=</span> <span class="nx">wfFindFile</span><span class="p">(</span><span class="nv">$t</span><span class="p">);</span>

			<span class="k">if</span> <span class="p">(</span><span class="nv">$file</span><span class="p">)</span> <span class="p">{</span>
				<span class="c1"># Get all filenames of old versions:</span>
				<span class="nv">$fields</span> <span class="o">=</span> <span class="nx">OldLocalFile</span><span class="o">::</span><span class="na">selectFields</span><span class="p">();</span>
				<span class="nv">$res</span> <span class="o">=</span> <span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">select</span><span class="p">(</span><span class="s1">'oldimage'</span><span class="p">,</span> <span class="nv">$fields</span><span class="p">,</span> <span class="k">array</span> <span class="p">(</span><span class="s1">'oi_name'</span> <span class="o">=&gt;</span> <span class="nv">$t</span><span class="p">));</span>

				<span class="k">while</span> <span class="p">(</span><span class="nv">$row</span> <span class="o">=</span> <span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">fetchObject</span><span class="p">(</span><span class="nv">$res</span><span class="p">))</span> <span class="p">{</span>
					<span class="nv">$oldLocalFile</span> <span class="o">=</span> <span class="nx">OldLocalFile</span><span class="o">::</span><span class="na">newFromRow</span><span class="p">(</span><span class="nv">$row</span><span class="p">,</span> <span class="nv">$file</span><span class="o">-&gt;</span><span class="na">repo</span><span class="p">);</span>
					<span class="nv">$path</span> <span class="o">=</span> <span class="nv">$oldLocalFile</span><span class="o">-&gt;</span><span class="na">getArchivePath</span><span class="p">()</span> <span class="o">.</span> <span class="s1">'/'</span> <span class="o">.</span> <span class="nv">$oldLocalFile</span><span class="o">-&gt;</span><span class="na">getArchiveName</span><span class="p">();</span>

					<span class="k">try</span> <span class="p">{</span> <span class="o">@</span><span class="nb">unlink</span><span class="p">(</span><span class="nv">$path</span><span class="p">);</span> <span class="p">}</span>
					<span class="k">catch</span> <span class="p">(</span><span class="nx">Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span> <span class="nv">$wgOut</span><span class="o">-&gt;</span><span class="na">addHTML</span><span class="p">(</span><span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">());</span> <span class="p">}</span>
				<span class="p">}</span>

				<span class="nv">$path</span> <span class="o">=</span> <span class="nv">$file</span><span class="o">-&gt;</span><span class="na">getPath</span><span class="p">();</span>

				<span class="k">try</span> <span class="p">{</span>
					<span class="nv">$file</span><span class="o">-&gt;</span><span class="na">purgeThumbnails</span><span class="p">();</span>
					<span class="o">@</span><span class="nb">unlink</span><span class="p">(</span><span class="nv">$path</span><span class="p">);</span>
				<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span> <span class="nv">$wgOut</span><span class="o">-&gt;</span><span class="na">addHTML</span><span class="p">(</span><span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">());</span> <span class="p">}</span>
			<span class="p">}</span>

			<span class="c1"># clean the filearchive for the given filename:</span>
			<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="s1">'filearchive'</span><span class="p">,</span> <span class="k">array</span> <span class="p">(</span><span class="s1">'fa_name'</span> <span class="o">=&gt;</span> <span class="nv">$t</span><span class="p">),</span> <span class="nx">__METHOD__</span><span class="p">);</span>

			<span class="c1"># Delete old db entries of the image:</span>
			<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="s1">'oldimage'</span><span class="p">,</span> <span class="k">array</span> <span class="p">(</span><span class="s1">'oi_name'</span> <span class="o">=&gt;</span> <span class="nv">$t</span><span class="p">),</span> <span class="nx">__METHOD__</span><span class="p">);</span>

			<span class="c1"># Delete archive entries of the image:</span>
			<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="s1">'filearchive'</span><span class="p">,</span> <span class="k">array</span> <span class="p">(</span><span class="s1">'fa_name'</span> <span class="o">=&gt;</span> <span class="nv">$t</span><span class="p">),</span> <span class="nx">__METHOD__</span><span class="p">);</span>

			<span class="c1"># Delete image entry:</span>
			<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="s1">'image'</span><span class="p">,</span> <span class="k">array</span> <span class="p">(</span><span class="s1">'img_name'</span> <span class="o">=&gt;</span> <span class="nv">$t</span><span class="p">),</span> <span class="nx">__METHOD__</span><span class="p">);</span>

			<span class="nv">$dbw</span><span class="o">-&gt;</span><span class="na">commit</span><span class="p">();</span>

			<span class="nv">$linkCache</span> <span class="o">=</span> <span class="nx">LinkCache</span><span class="o">::</span><span class="na">singleton</span><span class="p">();</span>
			<span class="nv">$linkCache</span><span class="o">-&gt;</span><span class="na">clear</span><span class="p">();</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></div>
<h2><span class="mw-headline" id="History">History</span></h2>
<p>The original Version of this extension was created by Ludovic MOUTON. The original Version can be found at <a href="/wiki/Extension:DeletePagePermanently/1.0" title="Extension:DeletePagePermanently/1.0">Extension:DeletePagePermanently/1.0</a></p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a href="/wiki/Help:Deleting_a_page" class="mw-redirect" title="Help:Deleting a page">Help:Deleting a page</a></li>
<li><a href="/wiki/Manual:DeleteArchivedRevisions.php" title="Manual:DeleteArchivedRevisions.php">Manual:DeleteArchivedRevisions.php</a> - Script to permanently blow away pages <i>after</i> you've done a normal delete on them</li>
<li><a href="/wiki/Extension:DeleteBatch" title="Extension:DeleteBatch">Extension:DeleteBatch</a></li>
<li><a href="/wiki/Extension:DeletePagesForGood" title="Extension:DeletePagesForGood">Extension:DeletePagesForGood</a></li>
<li><a href="/wiki/Extension:Maintenance" title="Extension:Maintenance">Extension:Maintenance</a></li>
<li><a href="/wiki/Extension:Nuke" title="Extension:Nuke">Extension:Nuke</a></li>
<li><a href="/wiki/Extension:NukeDPL" title="Extension:NukeDPL">Extension:NukeDPL</a></li>
<li><a href="/wiki/Extension:Oversight" title="Extension:Oversight">Extension:Oversight</a></li>
<li><a href="/wiki/Extension:Oversight_2" title="Extension:Oversight 2">Extension:Oversight 2</a></li>
<li><a href="/wiki/Extension:SpecialDeleteOldRevisions" title="Extension:SpecialDeleteOldRevisions">Extension:SpecialDeleteOldRevisions</a></li>
</ul>


<!-- Saved in parser cache with key mediawikiwiki:pcache:idhash:32599-0!*!0!!en!4!* and timestamp 20160926230137 and revision id 1929603
 -->
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.log.warn("Gadget \"site\" styles loaded twice. Migrate to type=general. See \u003Chttps://phabricator.wikimedia.org/T42284\u003E.");});</script><noscript><img src="//www.mediawiki.org/wiki/Special:CentralAutoLogin/start?type=1x1" alt="" title="" width="1" height="1" style="border: none; position: absolute;" /></noscript></div>					<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://www.mediawiki.org/w/index.php?title=Extension:DeletePagePermanently&amp;oldid=1929603">https://www.mediawiki.org/w/index.php?title=Extension:DeletePagePermanently&amp;oldid=1929603</a>"					</div>
				<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="/wiki/Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="/wiki/Category:Extensions_which_host_their_code_in-wiki" title="Category:Extensions which host their code in-wiki">Extensions which host their code in-wiki</a></li><li><a href="/wiki/Category:Extensions_with_unknown_license" title="Category:Extensions with unknown license">Extensions with unknown license</a></li><li><a href="/wiki/Category:Beta_status_extensions" title="Category:Beta status extensions">Beta status extensions</a></li><li><a href="/wiki/Category:MediaWiki_extensions_without_a_screenshot" title="Category:MediaWiki extensions without a screenshot">MediaWiki extensions without a screenshot</a></li><li><a href="/wiki/Category:User_interface_extensions" title="Category:User interface extensions">User interface extensions</a></li><li><a href="/wiki/Category:Extensions_which_add_rights" title="Category:Extensions which add rights">Extensions which add rights</a></li><li><a href="/wiki/Category:SkinTemplateContentActions_extensions" title="Category:SkinTemplateContentActions extensions">SkinTemplateContentActions extensions</a></li><li><a href="/wiki/Category:SkinTemplateNavigation_extensions" title="Category:SkinTemplateNavigation extensions">SkinTemplateNavigation extensions</a></li><li><a href="/wiki/Category:UnknownAction_extensions" title="Category:UnknownAction extensions">UnknownAction extensions</a></li><li><a href="/wiki/Category:All_extensions" title="Category:All extensions">All extensions</a></li><li><a href="/wiki/Category:Page_deletion_extensions" title="Category:Page deletion extensions">Page deletion extensions</a></li></ul></div></div>				<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>

			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-uls" class="active"><a href="#" class="uls-trigger autonym">English</a></li><li id="pt-anonuserpage">Not logged in</li><li id="pt-anontalk"><a href="/wiki/Special:MyTalk" title="Discussion about edits from this IP address [n]" accesskey="n">Talk</a></li><li id="pt-anoncontribs"><a href="/wiki/Special:MyContributions" title="A list of edits made from this IP address [y]" accesskey="y">Contributions</a></li><li id="pt-createaccount"><a href="/w/index.php?title=Special:CreateAccount&amp;returnto=Extension%3ADeletePagePermanently&amp;returntoquery=printable%3Dyes" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li><li id="pt-login"><a href="/w/index.php?title=Special:UserLogin&amp;returnto=Extension%3ADeletePagePermanently&amp;returntoquery=printable%3Dyes" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
															<li  id="ca-nstab-extension" class="selected"><span><a href="/wiki/Extension:DeletePagePermanently"  title="[c]" accesskey="c">Extension</a></span></li>
															<li  id="ca-talk"><span><a href="/wiki/Extension_talk:DeletePagePermanently"  title="Discussion about the content page [t]" accesskey="t" rel="discussion">Discussion</a></span></li>
													</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<h3 id="p-variants-label">
							<span>Variants</span><a href="#"></a>
						</h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
															<li id="ca-view" class="selected"><span><a href="/wiki/Extension:DeletePagePermanently" >Read</a></span></li>
															<li id="ca-edit"><span><a href="/w/index.php?title=Extension:DeletePagePermanently&amp;action=edit"  title="Edit this page [e]" accesskey="e">Edit</a></span></li>
															<li id="ca-history" class="collapsible"><span><a href="/w/index.php?title=Extension:DeletePagePermanently&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
													</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<h3 id="p-cactions-label"><span>More</span><a href="#"></a></h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>

						<form action="/w/index.php" id="searchform">
							<div id="simpleSearch">
							<input type="search" name="search" placeholder="Search" title="Search MediaWiki [f]" accesskey="f" id="searchInput"/><input type="hidden" value="Special:Search" name="title"/><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchButton" class="searchButton"/>							</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="/wiki/MediaWiki"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id='p-navigation' aria-labelledby='p-navigation-label'>
			<h3 id='p-navigation-label'>Navigation</h3>

			<div class="body">
									<ul>
						<li id="n-mainpage-description"><a href="/wiki/MediaWiki" title="Visit the main page [z]" accesskey="z">Main page</a></li><li id="n-mw-download"><a href="/wiki/Download">Get MediaWiki</a></li><li id="n-mw-extensions"><a href="/wiki/Special:MyLanguage/Category:Extensions">Get extensions</a></li><li id="n-blog-text"><a href="//blog.wikimedia.org/c/technology/">Tech blog</a></li><li id="n-mw-contribute"><a href="/wiki/Special:MyLanguage/How_to_contribute">Contribute</a></li>					</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-support' aria-labelledby='p-support-label'>
			<h3 id='p-support-label'>Support</h3>

			<div class="body">
									<ul>
						<li id="n-help"><a href="/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">User help</a></li><li id="n-mw-faq"><a href="/wiki/Manual:FAQ">FAQ</a></li><li id="n-mw-manual"><a href="/wiki/Manual:Contents">Technical manual</a></li><li id="n-mw-supportdesk"><a href="/wiki/Project:Support_desk">Support desk</a></li><li id="n-mw-communication"><a href="/wiki/Special:MyLanguage/Communication">Communication</a></li>					</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-development' aria-labelledby='p-development-label'>
			<h3 id='p-development-label'>Development</h3>

			<div class="body">
									<ul>
						<li id="n-mw-bugtracker"><a href="/wiki/Phabricator">Bug tracker</a></li><li id="n-mw-repo-browse"><a href="https://phabricator.wikimedia.org/diffusion/MW/">Code repository</a></li><li id="n-phpdoc"><a href="//doc.wikimedia.org/mediawiki-core/master/php/html/">Code docs</a></li><li id="n-svn-statistics"><a href="/wiki/Development_statistics">Statistics</a></li><li id="n-mw-wikimedia-engineering"><a href="/wiki/Special:MyLanguage/Wikimedia_Engineering">Wikimedia engineering</a></li>					</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-MediaWiki.org' aria-labelledby='p-MediaWiki.org-label'>
			<h3 id='p-MediaWiki.org-label'>MediaWiki.org</h3>

			<div class="body">
									<ul>
						<li id="n-cat-browser"><a href="/wiki/Category:Top_level">Browse categories</a></li><li id="n-portal"><a href="/wiki/Project:Help" title="About the project, what you can do, where to find things">Community portal</a></li><li id="n-recentchanges"><a href="/wiki/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-randompage"><a href="/wiki/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li><li id="n-mw-discussion"><a href="/wiki/Project:Current_issues">Current issues</a></li><li id="n-mw-sandbox"><a href="/wiki/Project:Sandbox">Sandbox</a></li>					</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-coll-print_export' aria-labelledby='p-coll-print_export-label'>
			<h3 id='p-coll-print_export-label'>Print/export</h3>

			<div class="body">
									<ul>
						<li id="coll-create_a_book"><a href="/w/index.php?title=Special:Book&amp;bookcmd=book_creator&amp;referer=Extension%3ADeletePagePermanently">Create a book</a></li><li id="coll-download-as-rdf2latex"><a href="/w/index.php?title=Special:Book&amp;bookcmd=render_article&amp;arttitle=Extension%3ADeletePagePermanently&amp;returnto=Extension%3ADeletePagePermanently&amp;oldid=1929603&amp;writer=rdf2latex">Download as PDF</a></li>					</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-tb' aria-labelledby='p-tb-label'>
			<h3 id='p-tb-label'>Tools</h3>

			<div class="body">
									<ul>
						<li id="t-whatlinkshere"><a href="/wiki/Special:WhatLinksHere/Extension:DeletePagePermanently" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="/wiki/Special:RecentChangesLinked/Extension:DeletePagePermanently" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="/wiki/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-permalink"><a href="/w/index.php?title=Extension:DeletePagePermanently&amp;oldid=1929603" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="/w/index.php?title=Extension:DeletePagePermanently&amp;action=info" title="More information about this page">Page information</a></li><li id="t-wikibase"><a href="https://www.wikidata.org/wiki/Q21677057" title="Link to connected data repository item [g]" accesskey="g">Wikidata item</a></li><li id="t-cite"><a href="/w/index.php?title=Special:CiteThisPage&amp;page=Extension%3ADeletePagePermanently&amp;id=1929603" title="Information on how to cite this page">Cite this page</a></li>					</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-lang' aria-labelledby='p-lang-label'>
			<h3 id='p-lang-label'>In other languages</h3>

			<div class="body">
									<ul>
											</ul>
				<div class='after-portlet after-portlet-lang'><span class="wb-langlinks-add wb-langlinks-link"><a href="https://www.wikidata.org/wiki/Q21677057#sitelinks-wikipedia" title="Add interlanguage links" class="wbc-editpage">Add links</a></span></div>			</div>
		</div>
				</div>
		</div>
		<div id="footer" role="contentinfo">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> This page was last modified on 1 November 2015, at 23:15.</li>
											<li id="footer-info-copyright">Text is available under the <a href="https://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike License</a>;
additional terms may apply.
See <a href="https://wikimediafoundation.org/wiki/Terms_of_Use">Terms of Use</a> for details.</li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-privacy"><a href="https://wikimediafoundation.org/wiki/Privacy_policy" class="extiw" title="wmf:Privacy policy">Privacy policy</a></li>
											<li id="footer-places-about"><a href="/wiki/Project:About" title="Project:About">About MediaWiki.org</a></li>
											<li id="footer-places-disclaimer"><a href="/wiki/Project:General_disclaimer" title="Project:General disclaimer">Disclaimers</a></li>
											<li id="footer-places-developers"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/How_to_contribute">Developers</a></li>
											<li id="footer-places-cookiestatement"><a href="https://wikimediafoundation.org/wiki/Cookie_statement">Cookie statement</a></li>
											<li id="footer-places-mobileview"><a href="//m.mediawiki.org/w/index.php?title=Extension:DeletePagePermanently&amp;printable=yes&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
											<li id="footer-copyrightico">
							<a href="https://wikimediafoundation.org/"><img src="/static/images/wikimedia-button.png" srcset="/static/images/wikimedia-button-1.5x.png 1.5x, /static/images/wikimedia-button-2x.png 2x" width="88" height="31" alt="Wikimedia Foundation"/></a>						</li>
											<li id="footer-poweredbyico">
							<a href="//www.mediawiki.org/"><img src="/static/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/static/images/poweredby_mediawiki_132x47.png 1.5x, /static/images/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>						</li>
									</ul>
						<div style="clear:both"></div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.loader.load(["mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.gadget.collapsibleTables","ext.gadget.Edittools","mmv.bootstrap.autostart","ext.visualEditor.targetLoader","ext.eventLogging.subscriber","ext.wikimediaEvents","ext.navigationTiming","ext.uls.eventlogger","ext.uls.init","ext.centralNotice.geoIP","ext.centralNotice.startUp"]);});</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set( {
    "wgPageParseReport": {
        "limitreport": {
            "cputime": "0.136",
            "walltime": "0.185",
            "ppvisitednodes": {
                "value": 1373,
                "limit": 1000000
            },
            "ppgeneratednodes": {
                "value": 0,
                "limit": 1500000
            },
            "postexpandincludesize": {
                "value": 29679,
                "limit": 2097152
            },
            "templateargumentsize": {
                "value": 4907,
                "limit": 2097152
            },
            "expansiondepth": {
                "value": 14,
                "limit": 40
            },
            "expensivefunctioncount": {
                "value": 17,
                "limit": 500
            },
            "entityaccesscount": {
                "value": 0,
                "limit": 400
            },
            "timingprofile": [
                "100.00%  123.161      1 -total",
                " 95.75%  117.928      4 Template:TNT",
                " 26.20%   32.267      1 Template:Mbox",
                " 13.76%   16.952      1 Template:Foreach",
                " 10.49%   12.921     15 Template:Ll",
                "  5.88%    7.236      8 Template:Translation",
                "  5.48%    6.753      3 Template:TNTN",
                "  5.06%    6.227      3 Template:Extension/HookInUse",
                "  3.08%    3.788      4 Template:Dir",
                "  1.34%    1.653      4 Template:Pagelang"
            ]
        },
        "scribunto": {
            "limitreport-timeusage": {
                "value": "0.072",
                "limit": "10.000"
            },
            "limitreport-memusage": {
                "value": 1686006,
                "limit": 52428800
            }
        },
        "cachereport": {
            "origin": "mw1263",
            "timestamp": "20160926230137",
            "ttl": 2592000,
            "transientcontent": false
        }
    }
} );});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":192,"wgHostname":"mw1275"});});</script>
	</body>
</html>
